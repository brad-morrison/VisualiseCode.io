{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useUnityLoader = exports.Status = void 0;\nvar react_1 = require(\"react\");\nvar Status;\n(function (Status) {\n  Status[\"Idle\"] = \"Idle\";\n  Status[\"Loading\"] = \"Loading\";\n  Status[\"Loaded\"] = \"Loaded\";\n  Status[\"Error\"] = \"Error\";\n})(Status = exports.Status || (exports.Status = {}));\n/**\n * Hook to embed a Unity Loader script.\n * @param src The source of the unity loader\n * @returns a hook that returns the status of the loader\n */\nfunction useUnityLoader(src) {\n  var _a = (0, react_1.useState)(src ? Status.Loading : Status.Idle),\n    status = _a[0],\n    setStatus = _a[1];\n  // Effect hook will be invoked when the src changes.\n  (0, react_1.useEffect)(function () {\n    if (src === null) {\n      setStatus(Status.Idle);\n      return;\n    }\n    // Fetch existing script element by src\n    // It may have been added by another instance of this hook\n    var script = document.querySelector(\"script[src=\\\"\".concat(src, \"\\\"]\"));\n    if (script === null) {\n      // Create script\n      script = document.createElement(\"script\");\n      script.src = src;\n      script.async = true;\n      script.setAttribute(\"data-status\", \"loading\");\n      // Add script to document body\n      document.body.appendChild(script);\n      // Store status in attribute on script\n      // This can be read by other instances of this hook\n      var setAttributeFromEvent = function setAttributeFromEvent(event) {\n        script === null || script === void 0 ? void 0 : script.setAttribute(\"data-status\", event.type === \"load\" ? \"ready\" : \"error\");\n      };\n      script.addEventListener(\"load\", setAttributeFromEvent);\n      script.addEventListener(\"error\", setAttributeFromEvent);\n    } else {\n      // Grab existing script status from attribute and set to state.\n      setStatus(script.getAttribute(\"data-status\") === \"ready\" ? Status.Loaded : Status.Error);\n    }\n    // Script event handler to update status in state\n    // Note: Even if the script already exists we still need to add\n    // event handlers to update the state for *this* hook instance.\n    var setStateFromEvent = function setStateFromEvent(event) {\n      setStatus(event.type === \"load\" ? Status.Loaded : Status.Error);\n    };\n    // Add event listeners\n    script.addEventListener(\"load\", setStateFromEvent);\n    script.addEventListener(\"error\", setStateFromEvent);\n    // Remove event listeners on cleanup\n    return function () {\n      if (script) {\n        script.removeEventListener(\"load\", setStateFromEvent);\n        script.removeEventListener(\"error\", setStateFromEvent);\n        document.body.removeChild(script);\n      }\n    };\n  }, [src] // Only re-run effect if script src changes\n  );\n\n  return status;\n}\nexports.useUnityLoader = useUnityLoader;","map":{"version":3,"names":["Object","defineProperty","exports","value","useUnityLoader","Status","react_1","require","src","_a","useState","Loading","Idle","status","setStatus","useEffect","script","document","querySelector","concat","createElement","async","setAttribute","body","appendChild","setAttributeFromEvent","event","type","addEventListener","getAttribute","Loaded","Error","setStateFromEvent","removeEventListener","removeChild"],"sources":["/Users/brad/Documents/GitHub/MScProject/node_modules/react-unity-webgl/distribution/hooks/use-unity-loader.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useUnityLoader = exports.Status = void 0;\nvar react_1 = require(\"react\");\nvar Status;\n(function (Status) {\n    Status[\"Idle\"] = \"Idle\";\n    Status[\"Loading\"] = \"Loading\";\n    Status[\"Loaded\"] = \"Loaded\";\n    Status[\"Error\"] = \"Error\";\n})(Status = exports.Status || (exports.Status = {}));\n/**\n * Hook to embed a Unity Loader script.\n * @param src The source of the unity loader\n * @returns a hook that returns the status of the loader\n */\nfunction useUnityLoader(src) {\n    var _a = (0, react_1.useState)(src ? Status.Loading : Status.Idle), status = _a[0], setStatus = _a[1];\n    // Effect hook will be invoked when the src changes.\n    (0, react_1.useEffect)(function () {\n        if (src === null) {\n            setStatus(Status.Idle);\n            return;\n        }\n        // Fetch existing script element by src\n        // It may have been added by another instance of this hook\n        var script = document.querySelector(\"script[src=\\\"\".concat(src, \"\\\"]\"));\n        if (script === null) {\n            // Create script\n            script = document.createElement(\"script\");\n            script.src = src;\n            script.async = true;\n            script.setAttribute(\"data-status\", \"loading\");\n            // Add script to document body\n            document.body.appendChild(script);\n            // Store status in attribute on script\n            // This can be read by other instances of this hook\n            var setAttributeFromEvent = function (event) {\n                script === null || script === void 0 ? void 0 : script.setAttribute(\"data-status\", event.type === \"load\" ? \"ready\" : \"error\");\n            };\n            script.addEventListener(\"load\", setAttributeFromEvent);\n            script.addEventListener(\"error\", setAttributeFromEvent);\n        }\n        else {\n            // Grab existing script status from attribute and set to state.\n            setStatus(script.getAttribute(\"data-status\") === \"ready\"\n                ? Status.Loaded\n                : Status.Error);\n        }\n        // Script event handler to update status in state\n        // Note: Even if the script already exists we still need to add\n        // event handlers to update the state for *this* hook instance.\n        var setStateFromEvent = function (event) {\n            setStatus(event.type === \"load\" ? Status.Loaded : Status.Error);\n        };\n        // Add event listeners\n        script.addEventListener(\"load\", setStateFromEvent);\n        script.addEventListener(\"error\", setStateFromEvent);\n        // Remove event listeners on cleanup\n        return function () {\n            if (script) {\n                script.removeEventListener(\"load\", setStateFromEvent);\n                script.removeEventListener(\"error\", setStateFromEvent);\n                document.body.removeChild(script);\n            }\n        };\n    }, [src] // Only re-run effect if script src changes\n    );\n    return status;\n}\nexports.useUnityLoader = useUnityLoader;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}