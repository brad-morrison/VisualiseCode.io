{"ast":null,"code":"/*!\n@fullcalendar/daygrid v4.0.1\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@fullcalendar/core')) : typeof define === 'function' && define.amd ? define(['exports', '@fullcalendar/core'], factory) : (global = global || self, factory(global.FullCalendarDayGrid = {}, global.FullCalendar));\n})(this, function (exports, core) {\n  'use strict';\n  /*! *****************************************************************************\r\n  Copyright (c) Microsoft Corporation. All rights reserved.\r\n  Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n  this file except in compliance with the License. You may obtain a copy of the\r\n  License at http://www.apache.org/licenses/LICENSE-2.0\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n  MERCHANTABLITY OR NON-INFRINGEMENT.\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n  and limitations under the License.\r\n  ***************************************************************************** */\n\n  /* global Reflect, Promise */\n\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  function __extends(d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  }\n\n  var _assign = function __assign() {\n    _assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n\n        for (var p in s) {\n          if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n      }\n\n      return t;\n    };\n\n    return _assign.apply(this, arguments);\n  };\n\n  var DayGridDateProfileGenerator = function (_super) {\n    __extends(DayGridDateProfileGenerator, _super);\n\n    function DayGridDateProfileGenerator() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    } // Computes the date range that will be rendered.\n\n\n    DayGridDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n      var dateEnv = this.dateEnv;\n\n      var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n\n      var start = renderRange.start;\n      var end = renderRange.end;\n      var endOfWeek; // year and month views should be aligned with weeks. this is already done for week\n\n      if (/^(year|month)$/.test(currentRangeUnit)) {\n        start = dateEnv.startOfWeek(start); // make end-of-week if not already\n\n        endOfWeek = dateEnv.startOfWeek(end);\n\n        if (endOfWeek.valueOf() !== end.valueOf()) {\n          end = core.addWeeks(endOfWeek, 1);\n        }\n      } // ensure 6 weeks\n\n\n      if (this.options.monthMode && this.options.fixedWeekCount) {\n        var rowCnt = Math.ceil( // could be partial weeks due to hiddenDays\n        core.diffWeeks(start, end));\n        end = core.addWeeks(end, 6 - rowCnt);\n      }\n\n      return {\n        start: start,\n        end: end\n      };\n    };\n\n    return DayGridDateProfileGenerator;\n  }(core.DateProfileGenerator);\n  /* A rectangular panel that is absolutely positioned over other content\n  ------------------------------------------------------------------------------------------------------------------------\n  Options:\n    - className (string)\n    - content (HTML string, element, or element array)\n    - parentEl\n    - top\n    - left\n    - right (the x coord of where the right edge should be. not a \"CSS\" right)\n    - autoHide (boolean)\n    - show (callback)\n    - hide (callback)\n  */\n\n\n  var Popover = function () {\n    function Popover(options) {\n      var _this = this;\n\n      this.isHidden = true;\n      this.margin = 10; // the space required between the popover and the edges of the scroll container\n      // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n\n      this.documentMousedown = function (ev) {\n        // only hide the popover if the click happened outside the popover\n        if (_this.el && !_this.el.contains(ev.target)) {\n          _this.hide();\n        }\n      };\n\n      this.options = options;\n    } // Shows the popover on the specified position. Renders it if not already\n\n\n    Popover.prototype.show = function () {\n      if (this.isHidden) {\n        if (!this.el) {\n          this.render();\n        }\n\n        this.el.style.display = '';\n        this.position();\n        this.isHidden = false;\n        this.trigger('show');\n      }\n    }; // Hides the popover, through CSS, but does not remove it from the DOM\n\n\n    Popover.prototype.hide = function () {\n      if (!this.isHidden) {\n        this.el.style.display = 'none';\n        this.isHidden = true;\n        this.trigger('hide');\n      }\n    }; // Creates `this.el` and renders content inside of it\n\n\n    Popover.prototype.render = function () {\n      var _this = this;\n\n      var options = this.options;\n      var el = this.el = core.createElement('div', {\n        className: 'fc-popover ' + (options.className || ''),\n        style: {\n          top: '0',\n          left: '0'\n        }\n      });\n\n      if (typeof options.content === 'function') {\n        options.content(el);\n      }\n\n      options.parentEl.appendChild(el); // when a click happens on anything inside with a 'fc-close' className, hide the popover\n\n      core.listenBySelector(el, 'click', '.fc-close', function (ev) {\n        _this.hide();\n      });\n\n      if (options.autoHide) {\n        document.addEventListener('mousedown', this.documentMousedown);\n      }\n    }; // Hides and unregisters any handlers\n\n\n    Popover.prototype.destroy = function () {\n      this.hide();\n\n      if (this.el) {\n        core.removeElement(this.el);\n        this.el = null;\n      }\n\n      document.removeEventListener('mousedown', this.documentMousedown);\n    }; // Positions the popover optimally, using the top/left/right options\n\n\n    Popover.prototype.position = function () {\n      var options = this.options;\n      var el = this.el;\n      var elDims = el.getBoundingClientRect(); // only used for width,height\n\n      var origin = core.computeRect(el.offsetParent);\n      var clippingRect = core.computeClippingRect(options.parentEl);\n      var top; // the \"position\" (not \"offset\") values for the popover\n\n      var left; //\n      // compute top and left\n\n      top = options.top || 0;\n\n      if (options.left !== undefined) {\n        left = options.left;\n      } else if (options.right !== undefined) {\n        left = options.right - elDims.width; // derive the left value from the right value\n      } else {\n        left = 0;\n      } // constrain to the view port. if constrained by two edges, give precedence to top/left\n\n\n      top = Math.min(top, clippingRect.bottom - elDims.height - this.margin);\n      top = Math.max(top, clippingRect.top + this.margin);\n      left = Math.min(left, clippingRect.right - elDims.width - this.margin);\n      left = Math.max(left, clippingRect.left + this.margin);\n      core.applyStyle(el, {\n        top: top - origin.top,\n        left: left - origin.left\n      });\n    }; // Triggers a callback. Calls a function in the option hash of the same name.\n    // Arguments beyond the first `name` are forwarded on.\n    // TODO: better code reuse for this. Repeat code\n    // can kill this???\n\n\n    Popover.prototype.trigger = function (name) {\n      if (this.options[name]) {\n        this.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n      }\n    };\n\n    return Popover;\n  }();\n  /* Event-rendering methods for the DayGrid class\n  ----------------------------------------------------------------------------------------------------------------------*/\n  // \"Simple\" is bad a name. has nothing to do with SimpleDayGrid\n\n\n  var SimpleDayGridEventRenderer = function (_super) {\n    __extends(SimpleDayGridEventRenderer, _super);\n\n    function SimpleDayGridEventRenderer() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    } // Builds the HTML to be used for the default element for an individual segment\n\n\n    SimpleDayGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n      var options = this.context.options;\n      var eventRange = seg.eventRange;\n      var eventDef = eventRange.def;\n      var eventUi = eventRange.ui;\n      var allDay = eventDef.allDay;\n      var isDraggable = eventUi.startEditable;\n      var isResizableFromStart = allDay && seg.isStart && eventUi.durationEditable && options.eventResizableFromStart;\n      var isResizableFromEnd = allDay && seg.isEnd && eventUi.durationEditable;\n      var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n      var skinCss = core.cssToStr(this.getSkinCss(eventUi));\n      var timeHtml = '';\n      var timeText;\n      var titleHtml;\n      classes.unshift('fc-day-grid-event', 'fc-h-event'); // Only display a timed events time if it is the starting segment\n\n      if (seg.isStart) {\n        timeText = this.getTimeText(eventRange);\n\n        if (timeText) {\n          timeHtml = '<span class=\"fc-time\">' + core.htmlEscape(timeText) + '</span>';\n        }\n      }\n\n      titleHtml = '<span class=\"fc-title\">' + (core.htmlEscape(eventDef.title || '') || '&nbsp;') + // we always want one line of height\n      '</span>';\n      return '<a class=\"' + classes.join(' ') + '\"' + (eventDef.url ? ' href=\"' + core.htmlEscape(eventDef.url) + '\"' : '') + (skinCss ? ' style=\"' + skinCss + '\"' : '') + '>' + '<div class=\"fc-content\">' + (options.dir === 'rtl' ? titleHtml + ' ' + timeHtml : // put a natural space in between\n      timeHtml + ' ' + titleHtml //\n      ) + '</div>' + (isResizableFromStart ? '<div class=\"fc-resizer fc-start-resizer\"></div>' : '') + (isResizableFromEnd ? '<div class=\"fc-resizer fc-end-resizer\"></div>' : '') + '</a>';\n    }; // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n\n\n    SimpleDayGridEventRenderer.prototype.computeEventTimeFormat = function () {\n      return {\n        hour: 'numeric',\n        minute: '2-digit',\n        omitZeroMinute: true,\n        meridiem: 'narrow'\n      };\n    };\n\n    SimpleDayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n      return false; // TODO: somehow consider the originating DayGrid's column count\n    };\n\n    return SimpleDayGridEventRenderer;\n  }(core.FgEventRenderer);\n  /* Event-rendering methods for the DayGrid class\n  ----------------------------------------------------------------------------------------------------------------------*/\n\n\n  var DayGridEventRenderer = function (_super) {\n    __extends(DayGridEventRenderer, _super);\n\n    function DayGridEventRenderer(dayGrid) {\n      var _this = _super.call(this, dayGrid.context) || this;\n\n      _this.dayGrid = dayGrid;\n      return _this;\n    } // Renders the given foreground event segments onto the grid\n\n\n    DayGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n      var rowStructs = this.rowStructs = this.renderSegRows(segs); // append to each row's content skeleton\n\n      this.dayGrid.rowEls.forEach(function (rowNode, i) {\n        rowNode.querySelector('.fc-content-skeleton > table').appendChild(rowStructs[i].tbodyEl);\n      }); // removes the \"more..\" events popover\n\n      if (!mirrorInfo) {\n        this.dayGrid.removeSegPopover();\n      }\n    }; // Unrenders all currently rendered foreground event segments\n\n\n    DayGridEventRenderer.prototype.detachSegs = function () {\n      var rowStructs = this.rowStructs || [];\n      var rowStruct;\n\n      while (rowStruct = rowStructs.pop()) {\n        core.removeElement(rowStruct.tbodyEl);\n      }\n\n      this.rowStructs = null;\n    }; // Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\n    // Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\n    // PRECONDITION: each segment shoud already have a rendered and assigned `.el`\n\n\n    DayGridEventRenderer.prototype.renderSegRows = function (segs) {\n      var rowStructs = [];\n      var segRows;\n      var row;\n      segRows = this.groupSegRows(segs); // group into nested arrays\n      // iterate each row of segment groupings\n\n      for (row = 0; row < segRows.length; row++) {\n        rowStructs.push(this.renderSegRow(row, segRows[row]));\n      }\n\n      return rowStructs;\n    }; // Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\n    // the segments. Returns object with a bunch of internal data about how the render was calculated.\n    // NOTE: modifies rowSegs\n\n\n    DayGridEventRenderer.prototype.renderSegRow = function (row, rowSegs) {\n      var dayGrid = this.dayGrid;\n      var colCnt = dayGrid.colCnt,\n          isRtl = dayGrid.isRtl;\n      var segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\n\n      var levelCnt = Math.max(1, segLevels.length); // ensure at least one level\n\n      var tbody = document.createElement('tbody');\n      var segMatrix = []; // lookup for which segments are rendered into which level+col cells\n\n      var cellMatrix = []; // lookup for all <td> elements of the level+col matrix\n\n      var loneCellMatrix = []; // lookup for <td> elements that only take up a single column\n\n      var i;\n      var levelSegs;\n      var col;\n      var tr;\n      var j;\n      var seg;\n      var td; // populates empty cells from the current column (`col`) to `endCol`\n\n      function emptyCellsUntil(endCol) {\n        while (col < endCol) {\n          // try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\n          td = (loneCellMatrix[i - 1] || [])[col];\n\n          if (td) {\n            td.rowSpan = (td.rowSpan || 1) + 1;\n          } else {\n            td = document.createElement('td');\n            tr.appendChild(td);\n          }\n\n          cellMatrix[i][col] = td;\n          loneCellMatrix[i][col] = td;\n          col++;\n        }\n      }\n\n      for (i = 0; i < levelCnt; i++) {\n        // iterate through all levels\n        levelSegs = segLevels[i];\n        col = 0;\n        tr = document.createElement('tr');\n        segMatrix.push([]);\n        cellMatrix.push([]);\n        loneCellMatrix.push([]); // levelCnt might be 1 even though there are no actual levels. protect against this.\n        // this single empty row is useful for styling.\n\n        if (levelSegs) {\n          for (j = 0; j < levelSegs.length; j++) {\n            // iterate through segments in level\n            seg = levelSegs[j];\n            var leftCol = isRtl ? colCnt - 1 - seg.lastCol : seg.firstCol;\n            var rightCol = isRtl ? colCnt - 1 - seg.firstCol : seg.lastCol;\n            emptyCellsUntil(leftCol); // create a container that occupies or more columns. append the event element.\n\n            td = core.createElement('td', {\n              className: 'fc-event-container'\n            }, seg.el);\n\n            if (leftCol !== rightCol) {\n              td.colSpan = rightCol - leftCol + 1;\n            } else {\n              // a single-column segment\n              loneCellMatrix[i][col] = td;\n            }\n\n            while (col <= rightCol) {\n              cellMatrix[i][col] = td;\n              segMatrix[i][col] = seg;\n              col++;\n            }\n\n            tr.appendChild(td);\n          }\n        }\n\n        emptyCellsUntil(colCnt); // finish off the row\n\n        var introHtml = dayGrid.renderProps.renderIntroHtml();\n\n        if (introHtml) {\n          if (dayGrid.isRtl) {\n            core.appendToElement(tr, introHtml);\n          } else {\n            core.prependToElement(tr, introHtml);\n          }\n        }\n\n        tbody.appendChild(tr);\n      }\n\n      return {\n        row: row,\n        tbodyEl: tbody,\n        cellMatrix: cellMatrix,\n        segMatrix: segMatrix,\n        segLevels: segLevels,\n        segs: rowSegs\n      };\n    }; // Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\n    // NOTE: modifies segs\n\n\n    DayGridEventRenderer.prototype.buildSegLevels = function (segs) {\n      var _a = this.dayGrid,\n          isRtl = _a.isRtl,\n          colCnt = _a.colCnt;\n      var levels = [];\n      var i;\n      var seg;\n      var j; // Give preference to elements with certain criteria, so they have\n      // a chance to be closer to the top.\n\n      segs = this.sortEventSegs(segs);\n\n      for (i = 0; i < segs.length; i++) {\n        seg = segs[i]; // loop through levels, starting with the topmost, until the segment doesn't collide with other segments\n\n        for (j = 0; j < levels.length; j++) {\n          if (!isDaySegCollision(seg, levels[j])) {\n            break;\n          }\n        } // `j` now holds the desired subrow index\n\n\n        seg.level = j;\n        seg.leftCol = isRtl ? colCnt - 1 - seg.lastCol : seg.firstCol; // for sorting only\n\n        seg.rightCol = isRtl ? colCnt - 1 - seg.firstCol : seg.lastCol // for sorting only\n        ;\n        (levels[j] || (levels[j] = [])).push(seg);\n      } // order segments left-to-right. very important if calendar is RTL\n\n\n      for (j = 0; j < levels.length; j++) {\n        levels[j].sort(compareDaySegCols);\n      }\n\n      return levels;\n    }; // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\n\n\n    DayGridEventRenderer.prototype.groupSegRows = function (segs) {\n      var segRows = [];\n      var i;\n\n      for (i = 0; i < this.dayGrid.rowCnt; i++) {\n        segRows.push([]);\n      }\n\n      for (i = 0; i < segs.length; i++) {\n        segRows[segs[i].row].push(segs[i]);\n      }\n\n      return segRows;\n    }; // Computes a default `displayEventEnd` value if one is not expliclty defined\n\n\n    DayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n      return this.dayGrid.colCnt === 1; // we'll likely have space if there's only one day\n    };\n\n    return DayGridEventRenderer;\n  }(SimpleDayGridEventRenderer); // Computes whether two segments' columns collide. They are assumed to be in the same row.\n\n\n  function isDaySegCollision(seg, otherSegs) {\n    var i;\n    var otherSeg;\n\n    for (i = 0; i < otherSegs.length; i++) {\n      otherSeg = otherSegs[i];\n\n      if (otherSeg.firstCol <= seg.lastCol && otherSeg.lastCol >= seg.firstCol) {\n        return true;\n      }\n    }\n\n    return false;\n  } // A cmp function for determining the leftmost event\n\n\n  function compareDaySegCols(a, b) {\n    return a.leftCol - b.leftCol;\n  }\n\n  var DayGridMirrorRenderer = function (_super) {\n    __extends(DayGridMirrorRenderer, _super);\n\n    function DayGridMirrorRenderer() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    DayGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n      var sourceSeg = mirrorInfo.sourceSeg;\n      var rowStructs = this.rowStructs = this.renderSegRows(segs); // inject each new event skeleton into each associated row\n\n      this.dayGrid.rowEls.forEach(function (rowNode, row) {\n        var skeletonEl = core.htmlToElement('<div class=\"fc-mirror-skeleton\"><table></table></div>'); // will be absolutely positioned\n\n        var skeletonTopEl;\n        var skeletonTop; // If there is an original segment, match the top position. Otherwise, put it at the row's top level\n\n        if (sourceSeg && sourceSeg.row === row) {\n          skeletonTopEl = sourceSeg.el;\n        } else {\n          skeletonTopEl = rowNode.querySelector('.fc-content-skeleton tbody');\n\n          if (!skeletonTopEl) {\n            // when no events\n            skeletonTopEl = rowNode.querySelector('.fc-content-skeleton table');\n          }\n        }\n\n        skeletonTop = skeletonTopEl.getBoundingClientRect().top - rowNode.getBoundingClientRect().top; // the offsetParent origin\n\n        skeletonEl.style.top = skeletonTop + 'px';\n        skeletonEl.querySelector('table').appendChild(rowStructs[row].tbodyEl);\n        rowNode.appendChild(skeletonEl);\n      });\n    };\n\n    return DayGridMirrorRenderer;\n  }(DayGridEventRenderer);\n\n  var DayGridFillRenderer = function (_super) {\n    __extends(DayGridFillRenderer, _super);\n\n    function DayGridFillRenderer(dayGrid) {\n      var _this = _super.call(this, dayGrid.context) || this;\n\n      _this.fillSegTag = 'td'; // override the default tag name\n\n      _this.dayGrid = dayGrid;\n      return _this;\n    }\n\n    DayGridFillRenderer.prototype.renderSegs = function (type, segs) {\n      // don't render timed background events\n      if (type === 'bgEvent') {\n        segs = segs.filter(function (seg) {\n          return seg.eventRange.def.allDay;\n        });\n      }\n\n      _super.prototype.renderSegs.call(this, type, segs);\n    };\n\n    DayGridFillRenderer.prototype.attachSegs = function (type, segs) {\n      var els = [];\n      var i;\n      var seg;\n      var skeletonEl;\n\n      for (i = 0; i < segs.length; i++) {\n        seg = segs[i];\n        skeletonEl = this.renderFillRow(type, seg);\n        this.dayGrid.rowEls[seg.row].appendChild(skeletonEl);\n        els.push(skeletonEl);\n      }\n\n      return els;\n    }; // Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\n\n\n    DayGridFillRenderer.prototype.renderFillRow = function (type, seg) {\n      var dayGrid = this.dayGrid;\n      var colCnt = dayGrid.colCnt,\n          isRtl = dayGrid.isRtl;\n      var leftCol = isRtl ? colCnt - 1 - seg.lastCol : seg.firstCol;\n      var rightCol = isRtl ? colCnt - 1 - seg.firstCol : seg.lastCol;\n      var startCol = leftCol;\n      var endCol = rightCol + 1;\n      var className;\n      var skeletonEl;\n      var trEl;\n\n      if (type === 'businessHours') {\n        className = 'bgevent';\n      } else {\n        className = type.toLowerCase();\n      }\n\n      skeletonEl = core.htmlToElement('<div class=\"fc-' + className + '-skeleton\">' + '<table><tr></tr></table>' + '</div>');\n      trEl = skeletonEl.getElementsByTagName('tr')[0];\n\n      if (startCol > 0) {\n        core.appendToElement(trEl, // will create (startCol + 1) td's\n        new Array(startCol + 1).join('<td></td>'));\n      }\n\n      seg.el.colSpan = endCol - startCol;\n      trEl.appendChild(seg.el);\n\n      if (endCol < colCnt) {\n        core.appendToElement(trEl, // will create (colCnt - endCol) td's\n        new Array(colCnt - endCol + 1).join('<td></td>'));\n      }\n\n      var introHtml = dayGrid.renderProps.renderIntroHtml();\n\n      if (introHtml) {\n        if (dayGrid.isRtl) {\n          core.appendToElement(trEl, introHtml);\n        } else {\n          core.prependToElement(trEl, introHtml);\n        }\n      }\n\n      return skeletonEl;\n    };\n\n    return DayGridFillRenderer;\n  }(core.FillRenderer);\n\n  var DayTile = function (_super) {\n    __extends(DayTile, _super);\n\n    function DayTile(context, el) {\n      var _this = _super.call(this, context, el) || this;\n\n      var eventRenderer = _this.eventRenderer = new DayTileEventRenderer(_this);\n      var renderFrame = _this.renderFrame = core.memoizeRendering(_this._renderFrame);\n      _this.renderFgEvents = core.memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderFrame]);\n      _this.renderEventSelection = core.memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n      _this.renderEventDrag = core.memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n      _this.renderEventResize = core.memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n      context.calendar.registerInteractiveComponent(_this, {\n        el: _this.el,\n        useEventCenter: false\n      });\n      return _this;\n    }\n\n    DayTile.prototype.render = function (props) {\n      this.renderFrame(props.date);\n      this.renderFgEvents(props.fgSegs);\n      this.renderEventSelection(props.eventSelection);\n      this.renderEventDrag(props.eventDragInstances);\n      this.renderEventResize(props.eventResizeInstances);\n    };\n\n    DayTile.prototype.destroy = function () {\n      _super.prototype.destroy.call(this);\n\n      this.renderFrame.unrender(); // should unrender everything else\n\n      this.calendar.unregisterInteractiveComponent(this);\n    };\n\n    DayTile.prototype._renderFrame = function (date) {\n      var _a = this,\n          theme = _a.theme,\n          dateEnv = _a.dateEnv;\n\n      var title = dateEnv.format(date, core.createFormatter(this.opt('dayPopoverFormat')) // TODO: cache\n      );\n      this.el.innerHTML = '<div class=\"fc-header ' + theme.getClass('popoverHeader') + '\">' + '<span class=\"fc-title\">' + core.htmlEscape(title) + '</span>' + '<span class=\"fc-close ' + theme.getIconClass('close') + '\"></span>' + '</div>' + '<div class=\"fc-body ' + theme.getClass('popoverContent') + '\">' + '<div class=\"fc-event-container\"></div>' + '</div>';\n      this.segContainerEl = this.el.querySelector('.fc-event-container');\n    };\n\n    DayTile.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n      var date = this.props.date; // HACK\n\n      if (positionLeft < elWidth && positionTop < elHeight) {\n        return {\n          component: this,\n          dateSpan: {\n            allDay: true,\n            range: {\n              start: date,\n              end: core.addDays(date, 1)\n            }\n          },\n          dayEl: this.el,\n          rect: {\n            left: 0,\n            top: 0,\n            right: elWidth,\n            bottom: elHeight\n          },\n          layer: 1\n        };\n      }\n    };\n\n    return DayTile;\n  }(core.DateComponent);\n\n  var DayTileEventRenderer = function (_super) {\n    __extends(DayTileEventRenderer, _super);\n\n    function DayTileEventRenderer(dayTile) {\n      var _this = _super.call(this, dayTile.context) || this;\n\n      _this.dayTile = dayTile;\n      return _this;\n    }\n\n    DayTileEventRenderer.prototype.attachSegs = function (segs) {\n      for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        this.dayTile.segContainerEl.appendChild(seg.el);\n      }\n    };\n\n    DayTileEventRenderer.prototype.detachSegs = function (segs) {\n      for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n        var seg = segs_2[_i];\n        core.removeElement(seg.el);\n      }\n    };\n\n    return DayTileEventRenderer;\n  }(SimpleDayGridEventRenderer);\n\n  var DayBgRow = function () {\n    function DayBgRow(context) {\n      this.context = context;\n    }\n\n    DayBgRow.prototype.renderHtml = function (props) {\n      var parts = [];\n\n      if (props.renderIntroHtml) {\n        parts.push(props.renderIntroHtml());\n      }\n\n      for (var _i = 0, _a = props.cells; _i < _a.length; _i++) {\n        var cell = _a[_i];\n        parts.push(renderCellHtml(cell.date, props.dateProfile, this.context, cell.htmlAttrs));\n      }\n\n      if (!props.cells.length) {\n        parts.push('<td class=\"fc-day ' + this.context.theme.getClass('widgetContent') + '\"></td>');\n      }\n\n      if (this.context.options.dir === 'rtl') {\n        parts.reverse();\n      }\n\n      return '<tr>' + parts.join('') + '</tr>';\n    };\n\n    return DayBgRow;\n  }();\n\n  function renderCellHtml(date, dateProfile, context, otherAttrs) {\n    var dateEnv = context.dateEnv,\n        theme = context.theme;\n    var isDateValid = core.rangeContainsMarker(dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n\n    var classes = core.getDayClasses(date, dateProfile, context);\n    classes.unshift('fc-day', theme.getClass('widgetContent'));\n    return '<td class=\"' + classes.join(' ') + '\"' + (isDateValid ? ' data-date=\"' + dateEnv.formatIso(date, {\n      omitTime: true\n    }) + '\"' : '') + (otherAttrs ? ' ' + otherAttrs : '') + '></td>';\n  }\n\n  var DAY_NUM_FORMAT = core.createFormatter({\n    day: 'numeric'\n  });\n  var WEEK_NUM_FORMAT = core.createFormatter({\n    week: 'numeric'\n  });\n\n  var DayGrid = function (_super) {\n    __extends(DayGrid, _super);\n\n    function DayGrid(context, el, renderProps) {\n      var _this = _super.call(this, context, el) || this;\n\n      _this.bottomCoordPadding = 0; // hack for extending the hit area for the last row of the coordinate grid\n\n      _this.isCellSizesDirty = false;\n      var eventRenderer = _this.eventRenderer = new DayGridEventRenderer(_this);\n      var fillRenderer = _this.fillRenderer = new DayGridFillRenderer(_this);\n      _this.mirrorRenderer = new DayGridMirrorRenderer(_this);\n      var renderCells = _this.renderCells = core.memoizeRendering(_this._renderCells, _this._unrenderCells);\n      _this.renderBusinessHours = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderCells]);\n      _this.renderDateSelection = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'highlight'), fillRenderer.unrender.bind(fillRenderer, 'highlight'), [renderCells]);\n      _this.renderBgEvents = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderCells]);\n      _this.renderFgEvents = core.memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderCells]);\n      _this.renderEventSelection = core.memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n      _this.renderEventDrag = core.memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderCells]);\n      _this.renderEventResize = core.memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderCells]);\n      _this.renderProps = renderProps;\n      return _this;\n    }\n\n    DayGrid.prototype.render = function (props) {\n      var cells = props.cells;\n      this.rowCnt = cells.length;\n      this.colCnt = cells[0].length;\n      this.renderCells(cells, props.isRigid);\n      this.renderBusinessHours(props.businessHourSegs);\n      this.renderDateSelection(props.dateSelectionSegs);\n      this.renderBgEvents(props.bgEventSegs);\n      this.renderFgEvents(props.fgEventSegs);\n      this.renderEventSelection(props.eventSelection);\n      this.renderEventDrag(props.eventDrag);\n      this.renderEventResize(props.eventResize);\n\n      if (this.segPopoverTile) {\n        this.updateSegPopoverTile();\n      }\n    };\n\n    DayGrid.prototype.destroy = function () {\n      _super.prototype.destroy.call(this);\n\n      this.renderCells.unrender(); // will unrender everything else\n    };\n\n    DayGrid.prototype.getCellRange = function (row, col) {\n      var start = this.props.cells[row][col].date;\n      var end = core.addDays(start, 1);\n      return {\n        start: start,\n        end: end\n      };\n    };\n\n    DayGrid.prototype.updateSegPopoverTile = function (date, segs) {\n      var ownProps = this.props;\n      this.segPopoverTile.receiveProps({\n        date: date || this.segPopoverTile.props.date,\n        fgSegs: segs || this.segPopoverTile.props.fgSegs,\n        eventSelection: ownProps.eventSelection,\n        eventDragInstances: ownProps.eventDrag ? ownProps.eventDrag.affectedInstances : null,\n        eventResizeInstances: ownProps.eventResize ? ownProps.eventResize.affectedInstances : null\n      });\n    };\n    /* Date Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n\n\n    DayGrid.prototype._renderCells = function (cells, isRigid) {\n      var _a = this,\n          view = _a.view,\n          dateEnv = _a.dateEnv;\n\n      var _b = this,\n          rowCnt = _b.rowCnt,\n          colCnt = _b.colCnt;\n\n      var html = '';\n      var row;\n      var col;\n\n      for (row = 0; row < rowCnt; row++) {\n        html += this.renderDayRowHtml(row, isRigid);\n      }\n\n      this.el.innerHTML = html;\n      this.rowEls = core.findElements(this.el, '.fc-row');\n      this.cellEls = core.findElements(this.el, '.fc-day, .fc-disabled-day');\n\n      if (this.isRtl) {\n        this.cellEls.reverse();\n      }\n\n      this.rowPositions = new core.PositionCache(this.el, this.rowEls, false, true // vertical\n      );\n      this.colPositions = new core.PositionCache(this.el, this.cellEls.slice(0, colCnt), // only the first row\n      true, false // horizontal\n      ); // trigger dayRender with each cell's element\n\n      for (row = 0; row < rowCnt; row++) {\n        for (col = 0; col < colCnt; col++) {\n          this.publiclyTrigger('dayRender', [{\n            date: dateEnv.toDate(cells[row][col].date),\n            el: this.getCellEl(row, col),\n            view: view\n          }]);\n        }\n      }\n\n      this.isCellSizesDirty = true;\n    };\n\n    DayGrid.prototype._unrenderCells = function () {\n      this.removeSegPopover();\n    }; // Generates the HTML for a single row, which is a div that wraps a table.\n    // `row` is the row number.\n\n\n    DayGrid.prototype.renderDayRowHtml = function (row, isRigid) {\n      var theme = this.theme;\n      var classes = ['fc-row', 'fc-week', theme.getClass('dayRow')];\n\n      if (isRigid) {\n        classes.push('fc-rigid');\n      }\n\n      var bgRow = new DayBgRow(this.context);\n      return '' + '<div class=\"' + classes.join(' ') + '\">' + '<div class=\"fc-bg\">' + '<table class=\"' + theme.getClass('tableGrid') + '\">' + bgRow.renderHtml({\n        cells: this.props.cells[row],\n        dateProfile: this.props.dateProfile,\n        renderIntroHtml: this.renderProps.renderBgIntroHtml\n      }) + '</table>' + '</div>' + '<div class=\"fc-content-skeleton\">' + '<table>' + (this.getIsNumbersVisible() ? '<thead>' + this.renderNumberTrHtml(row) + '</thead>' : '') + '</table>' + '</div>' + '</div>';\n    };\n\n    DayGrid.prototype.getIsNumbersVisible = function () {\n      return this.getIsDayNumbersVisible() || this.renderProps.cellWeekNumbersVisible || this.renderProps.colWeekNumbersVisible;\n    };\n\n    DayGrid.prototype.getIsDayNumbersVisible = function () {\n      return this.rowCnt > 1;\n    };\n    /* Grid Number Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n\n\n    DayGrid.prototype.renderNumberTrHtml = function (row) {\n      var intro = this.renderProps.renderNumberIntroHtml(row, this);\n      return '' + '<tr>' + (this.isRtl ? '' : intro) + this.renderNumberCellsHtml(row) + (this.isRtl ? intro : '') + '</tr>';\n    };\n\n    DayGrid.prototype.renderNumberCellsHtml = function (row) {\n      var htmls = [];\n      var col;\n      var date;\n\n      for (col = 0; col < this.colCnt; col++) {\n        date = this.props.cells[row][col].date;\n        htmls.push(this.renderNumberCellHtml(date));\n      }\n\n      if (this.isRtl) {\n        htmls.reverse();\n      }\n\n      return htmls.join('');\n    }; // Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\n    // The number row will only exist if either day numbers or week numbers are turned on.\n\n\n    DayGrid.prototype.renderNumberCellHtml = function (date) {\n      var _a = this,\n          view = _a.view,\n          dateEnv = _a.dateEnv;\n\n      var html = '';\n      var isDateValid = core.rangeContainsMarker(this.props.dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n\n      var isDayNumberVisible = this.getIsDayNumbersVisible() && isDateValid;\n      var classes;\n      var weekCalcFirstDow;\n\n      if (!isDayNumberVisible && !this.renderProps.cellWeekNumbersVisible) {\n        // no numbers in day cell (week number must be along the side)\n        return '<td></td>'; //  will create an empty space above events :(\n      }\n\n      classes = core.getDayClasses(date, this.props.dateProfile, this.context);\n      classes.unshift('fc-day-top');\n\n      if (this.renderProps.cellWeekNumbersVisible) {\n        weekCalcFirstDow = dateEnv.weekDow;\n      }\n\n      html += '<td class=\"' + classes.join(' ') + '\"' + (isDateValid ? ' data-date=\"' + dateEnv.formatIso(date, {\n        omitTime: true\n      }) + '\"' : '') + '>';\n\n      if (this.renderProps.cellWeekNumbersVisible && date.getUTCDay() === weekCalcFirstDow) {\n        html += core.buildGotoAnchorHtml(view, {\n          date: date,\n          type: 'week'\n        }, {\n          'class': 'fc-week-number'\n        }, dateEnv.format(date, WEEK_NUM_FORMAT) // inner HTML\n        );\n      }\n\n      if (isDayNumberVisible) {\n        html += core.buildGotoAnchorHtml(view, date, {\n          'class': 'fc-day-number'\n        }, dateEnv.format(date, DAY_NUM_FORMAT) // inner HTML\n        );\n      }\n\n      html += '</td>';\n      return html;\n    };\n    /* Sizing\n    ------------------------------------------------------------------------------------------------------------------*/\n\n\n    DayGrid.prototype.updateSize = function (isResize) {\n      var _a = this,\n          fillRenderer = _a.fillRenderer,\n          eventRenderer = _a.eventRenderer,\n          mirrorRenderer = _a.mirrorRenderer;\n\n      if (isResize || this.isCellSizesDirty) {\n        this.buildColPositions();\n        this.buildRowPositions();\n        this.isCellSizesDirty = false;\n      }\n\n      fillRenderer.computeSizes(isResize);\n      eventRenderer.computeSizes(isResize);\n      mirrorRenderer.computeSizes(isResize);\n      fillRenderer.assignSizes(isResize);\n      eventRenderer.assignSizes(isResize);\n      mirrorRenderer.assignSizes(isResize);\n    };\n\n    DayGrid.prototype.buildColPositions = function () {\n      this.colPositions.build();\n    };\n\n    DayGrid.prototype.buildRowPositions = function () {\n      this.rowPositions.build();\n      this.rowPositions.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\n    };\n    /* Hit System\n    ------------------------------------------------------------------------------------------------------------------*/\n\n\n    DayGrid.prototype.positionToHit = function (leftPosition, topPosition) {\n      var _a = this,\n          colPositions = _a.colPositions,\n          rowPositions = _a.rowPositions;\n\n      var col = colPositions.leftToIndex(leftPosition);\n      var row = rowPositions.topToIndex(topPosition);\n\n      if (row != null && col != null) {\n        return {\n          row: row,\n          col: col,\n          dateSpan: {\n            range: this.getCellRange(row, col),\n            allDay: true\n          },\n          dayEl: this.getCellEl(row, col),\n          relativeRect: {\n            left: colPositions.lefts[col],\n            right: colPositions.rights[col],\n            top: rowPositions.tops[row],\n            bottom: rowPositions.bottoms[row]\n          }\n        };\n      }\n    };\n    /* Cell System\n    ------------------------------------------------------------------------------------------------------------------*/\n    // FYI: the first column is the leftmost column, regardless of date\n\n\n    DayGrid.prototype.getCellEl = function (row, col) {\n      return this.cellEls[row * this.colCnt + col];\n    };\n    /* Event Drag Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n\n\n    DayGrid.prototype._renderEventDrag = function (state) {\n      if (state) {\n        this.eventRenderer.hideByHash(state.affectedInstances);\n        this.fillRenderer.renderSegs('highlight', state.segs);\n      }\n    };\n\n    DayGrid.prototype._unrenderEventDrag = function (state) {\n      if (state) {\n        this.eventRenderer.showByHash(state.affectedInstances);\n        this.fillRenderer.unrender('highlight');\n      }\n    };\n    /* Event Resize Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n\n\n    DayGrid.prototype._renderEventResize = function (state) {\n      if (state) {\n        this.eventRenderer.hideByHash(state.affectedInstances);\n        this.fillRenderer.renderSegs('highlight', state.segs);\n        this.mirrorRenderer.renderSegs(state.segs, {\n          isResizing: true,\n          sourceSeg: state.sourceSeg\n        });\n      }\n    };\n\n    DayGrid.prototype._unrenderEventResize = function (state) {\n      if (state) {\n        this.eventRenderer.showByHash(state.affectedInstances);\n        this.fillRenderer.unrender('highlight');\n        this.mirrorRenderer.unrender(state.segs, {\n          isResizing: true,\n          sourceSeg: state.sourceSeg\n        });\n      }\n    };\n    /* More+ Link Popover\n    ------------------------------------------------------------------------------------------------------------------*/\n\n\n    DayGrid.prototype.removeSegPopover = function () {\n      if (this.segPopover) {\n        this.segPopover.hide(); // in handler, will call segPopover's removeElement\n      }\n    }; // Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\n    // `levelLimit` can be false (don't limit), a number, or true (should be computed).\n\n\n    DayGrid.prototype.limitRows = function (levelLimit) {\n      var rowStructs = this.eventRenderer.rowStructs || [];\n      var row; // row #\n\n      var rowLevelLimit;\n\n      for (row = 0; row < rowStructs.length; row++) {\n        this.unlimitRow(row);\n\n        if (!levelLimit) {\n          rowLevelLimit = false;\n        } else if (typeof levelLimit === 'number') {\n          rowLevelLimit = levelLimit;\n        } else {\n          rowLevelLimit = this.computeRowLevelLimit(row);\n        }\n\n        if (rowLevelLimit !== false) {\n          this.limitRow(row, rowLevelLimit);\n        }\n      }\n    }; // Computes the number of levels a row will accomodate without going outside its bounds.\n    // Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\n    // `row` is the row number.\n\n\n    DayGrid.prototype.computeRowLevelLimit = function (row) {\n      var rowEl = this.rowEls[row]; // the containing \"fake\" row div\n\n      var rowBottom = rowEl.getBoundingClientRect().bottom; // relative to viewport!\n\n      var trEls = core.findChildren(this.eventRenderer.rowStructs[row].tbodyEl);\n      var i;\n      var trEl; // Reveal one level <tr> at a time and stop when we find one out of bounds\n\n      for (i = 0; i < trEls.length; i++) {\n        trEl = trEls[i];\n        trEl.classList.remove('fc-limited'); // reset to original state (reveal)\n\n        if (trEl.getBoundingClientRect().bottom > rowBottom) {\n          return i;\n        }\n      }\n\n      return false; // should not limit at all\n    }; // Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\n    // `row` is the row number.\n    // `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\n\n\n    DayGrid.prototype.limitRow = function (row, levelLimit) {\n      var _this = this;\n\n      var _a = this,\n          colCnt = _a.colCnt,\n          isRtl = _a.isRtl;\n\n      var rowStruct = this.eventRenderer.rowStructs[row];\n      var moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\n\n      var col = 0; // col #, left-to-right (not chronologically)\n\n      var levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\n\n      var cellMatrix; // a matrix (by level, then column) of all <td> elements in the row\n\n      var limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\n\n      var i;\n      var seg;\n      var segsBelow; // array of segment objects below `seg` in the current `col`\n\n      var totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\n\n      var colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\n\n      var td;\n      var rowSpan;\n      var segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\n\n      var j;\n      var moreTd;\n      var moreWrap;\n      var moreLink; // Iterates through empty level cells and places \"more\" links inside if need be\n\n      var emptyCellsUntil = function emptyCellsUntil(endCol) {\n        while (col < endCol) {\n          segsBelow = _this.getCellSegs(row, col, levelLimit);\n\n          if (segsBelow.length) {\n            td = cellMatrix[levelLimit - 1][col];\n            moreLink = _this.renderMoreLink(row, col, segsBelow);\n            moreWrap = core.createElement('div', null, moreLink);\n            td.appendChild(moreWrap);\n            moreNodes.push(moreWrap[0]);\n          }\n\n          col++;\n        }\n      };\n\n      if (levelLimit && levelLimit < rowStruct.segLevels.length) {\n        // is it actually over the limit?\n        levelSegs = rowStruct.segLevels[levelLimit - 1];\n        cellMatrix = rowStruct.cellMatrix;\n        limitedNodes = core.findChildren(rowStruct.tbodyEl).slice(levelLimit); // get level <tr> elements past the limit\n\n        limitedNodes.forEach(function (node) {\n          node.classList.add('fc-limited'); // hide elements and get a simple DOM-nodes array\n        }); // iterate though segments in the last allowable level\n\n        for (i = 0; i < levelSegs.length; i++) {\n          seg = levelSegs[i];\n          var leftCol = isRtl ? colCnt - 1 - seg.lastCol : seg.firstCol;\n          var rightCol = isRtl ? colCnt - 1 - seg.firstCol : seg.lastCol;\n          emptyCellsUntil(leftCol); // process empty cells before the segment\n          // determine *all* segments below `seg` that occupy the same columns\n\n          colSegsBelow = [];\n          totalSegsBelow = 0;\n\n          while (col <= rightCol) {\n            segsBelow = this.getCellSegs(row, col, levelLimit);\n            colSegsBelow.push(segsBelow);\n            totalSegsBelow += segsBelow.length;\n            col++;\n          }\n\n          if (totalSegsBelow) {\n            // do we need to replace this segment with one or many \"more\" links?\n            td = cellMatrix[levelLimit - 1][leftCol]; // the segment's parent cell\n\n            rowSpan = td.rowSpan || 1;\n            segMoreNodes = []; // make a replacement <td> for each column the segment occupies. will be one for each colspan\n\n            for (j = 0; j < colSegsBelow.length; j++) {\n              moreTd = core.createElement('td', {\n                className: 'fc-more-cell',\n                rowSpan: rowSpan\n              });\n              segsBelow = colSegsBelow[j];\n              moreLink = this.renderMoreLink(row, leftCol + j, [seg].concat(segsBelow) // count seg as hidden too\n              );\n              moreWrap = core.createElement('div', null, moreLink);\n              moreTd.appendChild(moreWrap);\n              segMoreNodes.push(moreTd);\n              moreNodes.push(moreTd);\n            }\n\n            td.classList.add('fc-limited');\n            core.insertAfterElement(td, segMoreNodes);\n            limitedNodes.push(td);\n          }\n        }\n\n        emptyCellsUntil(this.colCnt); // finish off the level\n\n        rowStruct.moreEls = moreNodes; // for easy undoing later\n\n        rowStruct.limitedEls = limitedNodes; // for easy undoing later\n      }\n    }; // Reveals all levels and removes all \"more\"-related elements for a grid's row.\n    // `row` is a row number.\n\n\n    DayGrid.prototype.unlimitRow = function (row) {\n      var rowStruct = this.eventRenderer.rowStructs[row];\n\n      if (rowStruct.moreEls) {\n        rowStruct.moreEls.forEach(core.removeElement);\n        rowStruct.moreEls = null;\n      }\n\n      if (rowStruct.limitedEls) {\n        rowStruct.limitedEls.forEach(function (limitedEl) {\n          limitedEl.classList.remove('fc-limited');\n        });\n        rowStruct.limitedEls = null;\n      }\n    }; // Renders an <a> element that represents hidden event element for a cell.\n    // Responsible for attaching click handler as well.\n\n\n    DayGrid.prototype.renderMoreLink = function (row, col, hiddenSegs) {\n      var _this = this;\n\n      var _a = this,\n          view = _a.view,\n          dateEnv = _a.dateEnv;\n\n      var a = core.createElement('a', {\n        className: 'fc-more'\n      });\n      a.innerText = this.getMoreLinkText(hiddenSegs.length);\n      a.addEventListener('click', function (ev) {\n        var clickOption = _this.opt('eventLimitClick');\n\n        var _col = _this.isRtl ? _this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n\n\n        var date = _this.props.cells[row][_col].date;\n        var moreEl = ev.currentTarget;\n\n        var dayEl = _this.getCellEl(row, col);\n\n        var allSegs = _this.getCellSegs(row, col); // rescope the segments to be within the cell's date\n\n\n        var reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\n\n        var reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\n\n        if (typeof clickOption === 'function') {\n          // the returned value can be an atomic option\n          clickOption = _this.publiclyTrigger('eventLimitClick', [{\n            date: dateEnv.toDate(date),\n            allDay: true,\n            dayEl: dayEl,\n            moreEl: moreEl,\n            segs: reslicedAllSegs,\n            hiddenSegs: reslicedHiddenSegs,\n            jsEvent: ev,\n            view: view\n          }]);\n        }\n\n        if (clickOption === 'popover') {\n          _this.showSegPopover(row, col, moreEl, reslicedAllSegs);\n        } else if (typeof clickOption === 'string') {\n          // a view name\n          view.calendar.zoomTo(date, clickOption);\n        }\n      });\n      return a;\n    }; // Reveals the popover that displays all events within a cell\n\n\n    DayGrid.prototype.showSegPopover = function (row, col, moreLink, segs) {\n      var _this = this;\n\n      var _a = this,\n          calendar = _a.calendar,\n          view = _a.view,\n          theme = _a.theme;\n\n      var _col = this.isRtl ? this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n\n\n      var moreWrap = moreLink.parentNode; // the <div> wrapper around the <a>\n\n      var topEl; // the element we want to match the top coordinate of\n\n      var options;\n\n      if (this.rowCnt === 1) {\n        topEl = view.el; // will cause the popover to cover any sort of header\n      } else {\n        topEl = this.rowEls[row]; // will align with top of row\n      }\n\n      options = {\n        className: 'fc-more-popover ' + theme.getClass('popover'),\n        parentEl: view.el,\n        top: core.computeRect(topEl).top,\n        autoHide: true,\n        content: function content(el) {\n          _this.segPopoverTile = new DayTile(_this.context, el);\n\n          _this.updateSegPopoverTile(_this.props.cells[row][_col].date, segs);\n        },\n        hide: function hide() {\n          _this.segPopoverTile.destroy();\n\n          _this.segPopoverTile = null;\n\n          _this.segPopover.destroy();\n\n          _this.segPopover = null;\n        }\n      }; // Determine horizontal coordinate.\n      // We use the moreWrap instead of the <td> to avoid border confusion.\n\n      if (this.isRtl) {\n        options.right = core.computeRect(moreWrap).right + 1; // +1 to be over cell border\n      } else {\n        options.left = core.computeRect(moreWrap).left - 1; // -1 to be over cell border\n      }\n\n      this.segPopover = new Popover(options);\n      this.segPopover.show();\n      calendar.releaseAfterSizingTriggers(); // hack for eventPositioned\n    }; // Given the events within an array of segment objects, reslice them to be in a single day\n\n\n    DayGrid.prototype.resliceDaySegs = function (segs, dayDate) {\n      var dayStart = dayDate;\n      var dayEnd = core.addDays(dayStart, 1);\n      var dayRange = {\n        start: dayStart,\n        end: dayEnd\n      };\n      var newSegs = [];\n\n      for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        var eventRange = seg.eventRange;\n        var origRange = eventRange.range;\n        var slicedRange = core.intersectRanges(origRange, dayRange);\n\n        if (slicedRange) {\n          newSegs.push(_assign({}, seg, {\n            eventRange: {\n              def: eventRange.def,\n              ui: _assign({}, eventRange.ui, {\n                durationEditable: false\n              }),\n              instance: eventRange.instance,\n              range: slicedRange\n            },\n            isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(),\n            isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf()\n          }));\n        }\n      }\n\n      return newSegs;\n    }; // Generates the text that should be inside a \"more\" link, given the number of events it represents\n\n\n    DayGrid.prototype.getMoreLinkText = function (num) {\n      var opt = this.opt('eventLimitText');\n\n      if (typeof opt === 'function') {\n        return opt(num);\n      } else {\n        return '+' + num + ' ' + opt;\n      }\n    }; // Returns segments within a given cell.\n    // If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\n\n\n    DayGrid.prototype.getCellSegs = function (row, col, startLevel) {\n      var segMatrix = this.eventRenderer.rowStructs[row].segMatrix;\n      var level = startLevel || 0;\n      var segs = [];\n      var seg;\n\n      while (level < segMatrix.length) {\n        seg = segMatrix[level][col];\n\n        if (seg) {\n          segs.push(seg);\n        }\n\n        level++;\n      }\n\n      return segs;\n    };\n\n    return DayGrid;\n  }(core.DateComponent);\n\n  var WEEK_NUM_FORMAT$1 = core.createFormatter({\n    week: 'numeric'\n  });\n  /* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n  ----------------------------------------------------------------------------------------------------------------------*/\n  // It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\n  // It is responsible for managing width/height.\n\n  var DayGridView = function (_super) {\n    __extends(DayGridView, _super);\n\n    function DayGridView(context, viewSpec, dateProfileGenerator, parentEl) {\n      var _this = _super.call(this, context, viewSpec, dateProfileGenerator, parentEl) || this;\n      /* Header Rendering\n      ------------------------------------------------------------------------------------------------------------------*/\n      // Generates the HTML that will go before the day-of week header cells\n\n\n      _this.renderHeadIntroHtml = function () {\n        var theme = _this.theme;\n\n        if (_this.colWeekNumbersVisible) {\n          return '' + '<th class=\"fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.weekNumberStyleAttr() + '>' + '<span>' + // needed for matchCellWidths\n          core.htmlEscape(_this.opt('weekLabel')) + '</span>' + '</th>';\n        }\n\n        return '';\n      };\n      /* Day Grid Rendering\n      ------------------------------------------------------------------------------------------------------------------*/\n      // Generates the HTML that will go before content-skeleton cells that display the day/week numbers\n\n\n      _this.renderDayGridNumberIntroHtml = function (row, dayGrid) {\n        var dateEnv = _this.dateEnv;\n        var weekStart = dayGrid.props.cells[row][0].date;\n\n        if (_this.colWeekNumbersVisible) {\n          return '' + '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '>' + core.buildGotoAnchorHtml( // aside from link, important for matchCellWidths\n          _this, {\n            date: weekStart,\n            type: 'week',\n            forceOff: dayGrid.colCnt === 1\n          }, dateEnv.format(weekStart, WEEK_NUM_FORMAT$1) // inner HTML\n          ) + '</td>';\n        }\n\n        return '';\n      }; // Generates the HTML that goes before the day bg cells for each day-row\n\n\n      _this.renderDayGridBgIntroHtml = function () {\n        var theme = _this.theme;\n\n        if (_this.colWeekNumbersVisible) {\n          return '<td class=\"fc-week-number ' + theme.getClass('widgetContent') + '\" ' + _this.weekNumberStyleAttr() + '></td>';\n        }\n\n        return '';\n      }; // Generates the HTML that goes before every other type of row generated by DayGrid.\n      // Affects mirror-skeleton and highlight-skeleton rows.\n\n\n      _this.renderDayGridIntroHtml = function () {\n        if (_this.colWeekNumbersVisible) {\n          return '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '></td>';\n        }\n\n        return '';\n      };\n\n      _this.el.classList.add('fc-dayGrid-view');\n\n      _this.el.innerHTML = _this.renderSkeletonHtml();\n      _this.scroller = new core.ScrollComponent('hidden', // overflow x\n      'auto' // overflow y\n      );\n      var dayGridContainerEl = _this.scroller.el;\n\n      _this.el.querySelector('.fc-body > tr > td').appendChild(dayGridContainerEl);\n\n      dayGridContainerEl.classList.add('fc-day-grid-container');\n      var dayGridEl = core.createElement('div', {\n        className: 'fc-day-grid'\n      });\n      dayGridContainerEl.appendChild(dayGridEl);\n      var cellWeekNumbersVisible;\n\n      if (_this.opt('weekNumbers')) {\n        if (_this.opt('weekNumbersWithinDays')) {\n          cellWeekNumbersVisible = true;\n          _this.colWeekNumbersVisible = false;\n        } else {\n          cellWeekNumbersVisible = false;\n          _this.colWeekNumbersVisible = true;\n        }\n      } else {\n        _this.colWeekNumbersVisible = false;\n        cellWeekNumbersVisible = false;\n      }\n\n      _this.dayGrid = new DayGrid(_this.context, dayGridEl, {\n        renderNumberIntroHtml: _this.renderDayGridNumberIntroHtml,\n        renderBgIntroHtml: _this.renderDayGridBgIntroHtml,\n        renderIntroHtml: _this.renderDayGridIntroHtml,\n        colWeekNumbersVisible: _this.colWeekNumbersVisible,\n        cellWeekNumbersVisible: cellWeekNumbersVisible\n      });\n      return _this;\n    }\n\n    DayGridView.prototype.destroy = function () {\n      _super.prototype.destroy.call(this);\n\n      this.dayGrid.destroy();\n      this.scroller.destroy();\n    }; // Builds the HTML skeleton for the view.\n    // The day-grid component will render inside of a container defined by this HTML.\n\n\n    DayGridView.prototype.renderSkeletonHtml = function () {\n      var theme = this.theme;\n      return '' + '<table class=\"' + theme.getClass('tableGrid') + '\">' + (this.opt('columnHeader') ? '<thead class=\"fc-head\">' + '<tr>' + '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' + '</tr>' + '</thead>' : '') + '<tbody class=\"fc-body\">' + '<tr>' + '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' + '</tr>' + '</tbody>' + '</table>';\n    }; // Generates an HTML attribute string for setting the width of the week number column, if it is known\n\n\n    DayGridView.prototype.weekNumberStyleAttr = function () {\n      if (this.weekNumberWidth != null) {\n        return 'style=\"width:' + this.weekNumberWidth + 'px\"';\n      }\n\n      return '';\n    }; // Determines whether each row should have a constant height\n\n\n    DayGridView.prototype.hasRigidRows = function () {\n      var eventLimit = this.opt('eventLimit');\n      return eventLimit && typeof eventLimit !== 'number';\n    };\n    /* Dimensions\n    ------------------------------------------------------------------------------------------------------------------*/\n\n\n    DayGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n      _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n\n\n      this.dayGrid.updateSize(isResize);\n    }; // Refreshes the horizontal dimensions of the view\n\n\n    DayGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n      var dayGrid = this.dayGrid;\n      var eventLimit = this.opt('eventLimit');\n      var headRowEl = this.header ? this.header.el : null; // HACK\n\n      var scrollerHeight;\n      var scrollbarWidths; // hack to give the view some height prior to dayGrid's columns being rendered\n      // TODO: separate setting height from scroller VS dayGrid.\n\n      if (!dayGrid.rowEls) {\n        if (!isAuto) {\n          scrollerHeight = this.computeScrollerHeight(viewHeight);\n          this.scroller.setHeight(scrollerHeight);\n        }\n\n        return;\n      }\n\n      if (this.colWeekNumbersVisible) {\n        // Make sure all week number cells running down the side have the same width.\n        this.weekNumberWidth = core.matchCellWidths(core.findElements(this.el, '.fc-week-number'));\n      } // reset all heights to be natural\n\n\n      this.scroller.clear();\n\n      if (headRowEl) {\n        core.uncompensateScroll(headRowEl);\n      }\n\n      dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n      // is the event limit a constant level number?\n\n      if (eventLimit && typeof eventLimit === 'number') {\n        dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\n      } // distribute the height to the rows\n      // (viewHeight is a \"recommended\" value if isAuto)\n\n\n      scrollerHeight = this.computeScrollerHeight(viewHeight);\n      this.setGridHeight(scrollerHeight, isAuto); // is the event limit dynamically calculated?\n\n      if (eventLimit && typeof eventLimit !== 'number') {\n        dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\n      }\n\n      if (!isAuto) {\n        // should we force dimensions of the scroll container?\n        this.scroller.setHeight(scrollerHeight);\n        scrollbarWidths = this.scroller.getScrollbarWidths();\n\n        if (scrollbarWidths.left || scrollbarWidths.right) {\n          // using scrollbars?\n          if (headRowEl) {\n            core.compensateScroll(headRowEl, scrollbarWidths);\n          } // doing the scrollbar compensation might have created text overflow which created more height. redo\n\n\n          scrollerHeight = this.computeScrollerHeight(viewHeight);\n          this.scroller.setHeight(scrollerHeight);\n        } // guarantees the same scrollbar widths\n\n\n        this.scroller.lockOverflow(scrollbarWidths);\n      }\n    }; // given a desired total height of the view, returns what the height of the scroller should be\n\n\n    DayGridView.prototype.computeScrollerHeight = function (viewHeight) {\n      return viewHeight - core.subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n    }; // Sets the height of just the DayGrid component in this view\n\n\n    DayGridView.prototype.setGridHeight = function (height, isAuto) {\n      if (this.opt('monthMode')) {\n        // if auto, make the height of each row the height that it would be if there were 6 weeks\n        if (isAuto) {\n          height *= this.dayGrid.rowCnt / 6;\n        }\n\n        core.distributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\n      } else {\n        if (isAuto) {\n          core.undistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\n        } else {\n          core.distributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\n        }\n      }\n    };\n    /* Scroll\n    ------------------------------------------------------------------------------------------------------------------*/\n\n\n    DayGridView.prototype.computeInitialDateScroll = function () {\n      return {\n        top: 0\n      };\n    };\n\n    DayGridView.prototype.queryDateScroll = function () {\n      return {\n        top: this.scroller.getScrollTop()\n      };\n    };\n\n    DayGridView.prototype.applyDateScroll = function (scroll) {\n      if (scroll.top !== undefined) {\n        this.scroller.setScrollTop(scroll.top);\n      }\n    };\n\n    return DayGridView;\n  }(core.View);\n\n  DayGridView.prototype.dateProfileGeneratorClass = DayGridDateProfileGenerator;\n\n  var SimpleDayGrid = function (_super) {\n    __extends(SimpleDayGrid, _super);\n\n    function SimpleDayGrid(context, dayGrid) {\n      var _this = _super.call(this, context, dayGrid.el) || this;\n\n      _this.slicer = new DayGridSlicer();\n      _this.dayGrid = dayGrid;\n      context.calendar.registerInteractiveComponent(_this, {\n        el: _this.dayGrid.el\n      });\n      return _this;\n    }\n\n    SimpleDayGrid.prototype.destroy = function () {\n      _super.prototype.destroy.call(this);\n\n      this.calendar.unregisterInteractiveComponent(this);\n    };\n\n    SimpleDayGrid.prototype.render = function (props) {\n      var dayGrid = this.dayGrid;\n      var dateProfile = props.dateProfile,\n          dayTable = props.dayTable;\n      dayGrid.receiveProps(_assign({}, this.slicer.sliceProps(props, dateProfile, props.nextDayThreshold, dayGrid, dayTable), {\n        dateProfile: dateProfile,\n        cells: dayTable.cells,\n        isRigid: props.isRigid\n      }));\n    };\n\n    SimpleDayGrid.prototype.queryHit = function (positionLeft, positionTop) {\n      var rawHit = this.dayGrid.positionToHit(positionLeft, positionTop);\n\n      if (rawHit) {\n        return {\n          component: this.dayGrid,\n          dateSpan: rawHit.dateSpan,\n          dayEl: rawHit.dayEl,\n          rect: {\n            left: rawHit.relativeRect.left,\n            right: rawHit.relativeRect.right,\n            top: rawHit.relativeRect.top,\n            bottom: rawHit.relativeRect.bottom\n          },\n          layer: 0\n        };\n      }\n    };\n\n    return SimpleDayGrid;\n  }(core.DateComponent);\n\n  var DayGridSlicer = function (_super) {\n    __extends(DayGridSlicer, _super);\n\n    function DayGridSlicer() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    DayGridSlicer.prototype.sliceRange = function (dateRange, dayTable) {\n      return dayTable.sliceRange(dateRange);\n    };\n\n    return DayGridSlicer;\n  }(core.Slicer);\n\n  var DayGridView$1 = function (_super) {\n    __extends(DayGridView, _super);\n\n    function DayGridView(_context, viewSpec, dateProfileGenerator, parentEl) {\n      var _this = _super.call(this, _context, viewSpec, dateProfileGenerator, parentEl) || this;\n\n      _this.buildDayTable = core.memoize(buildDayTable);\n\n      if (_this.opt('columnHeader')) {\n        _this.header = new core.DayHeader(_this.context, _this.el.querySelector('.fc-head-container'));\n      }\n\n      _this.simpleDayGrid = new SimpleDayGrid(_this.context, _this.dayGrid);\n      return _this;\n    }\n\n    DayGridView.prototype.destroy = function () {\n      _super.prototype.destroy.call(this);\n\n      if (this.header) {\n        this.header.destroy();\n      }\n\n      this.simpleDayGrid.destroy();\n    };\n\n    DayGridView.prototype.render = function (props) {\n      _super.prototype.render.call(this, props);\n\n      var dateProfile = this.props.dateProfile;\n      var dayTable = this.dayTable = this.buildDayTable(dateProfile, this.dateProfileGenerator);\n\n      if (this.header) {\n        this.header.receiveProps({\n          dateProfile: dateProfile,\n          dates: dayTable.headerDates,\n          datesRepDistinctDays: dayTable.rowCnt === 1,\n          renderIntroHtml: this.renderHeadIntroHtml\n        });\n      }\n\n      this.simpleDayGrid.receiveProps({\n        dateProfile: dateProfile,\n        dayTable: dayTable,\n        businessHours: props.businessHours,\n        dateSelection: props.dateSelection,\n        eventStore: props.eventStore,\n        eventUiBases: props.eventUiBases,\n        eventSelection: props.eventSelection,\n        eventDrag: props.eventDrag,\n        eventResize: props.eventResize,\n        isRigid: this.hasRigidRows(),\n        nextDayThreshold: this.nextDayThreshold\n      });\n    };\n\n    return DayGridView;\n  }(DayGridView);\n\n  function buildDayTable(dateProfile, dateProfileGenerator) {\n    var daySeries = new core.DaySeries(dateProfile.renderRange, dateProfileGenerator);\n    return new core.DayTable(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n  }\n\n  var main = core.createPlugin({\n    defaultView: 'dayGridMonth',\n    views: {\n      dayGrid: DayGridView$1,\n      dayGridDay: {\n        type: 'dayGrid',\n        duration: {\n          days: 1\n        }\n      },\n      dayGridWeek: {\n        type: 'dayGrid',\n        duration: {\n          weeks: 1\n        }\n      },\n      dayGridMonth: {\n        type: 'dayGrid',\n        duration: {\n          months: 1\n        },\n        monthMode: true,\n        fixedWeekCount: true\n      }\n    }\n  });\n  exports.default = main;\n  exports.SimpleDayGrid = SimpleDayGrid;\n  exports.DayGridSlicer = DayGridSlicer;\n  exports.DayGrid = DayGrid;\n  exports.AbstractDayGridView = DayGridView;\n  exports.DayGridView = DayGridView$1;\n  exports.buildBasicDayTable = buildDayTable;\n  exports.DayBgRow = DayBgRow;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["/Users/brad/Documents/GitHub/MScProject/node_modules/@fullcalendar/daygrid/main.js"],"names":["global","factory","exports","module","require","define","amd","self","FullCalendarDayGrid","FullCalendar","core","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","DayGridDateProfileGenerator","_super","buildRenderRange","currentRange","currentRangeUnit","isRangeAllDay","dateEnv","renderRange","start","end","endOfWeek","test","startOfWeek","valueOf","addWeeks","options","monthMode","fixedWeekCount","rowCnt","Math","ceil","diffWeeks","DateProfileGenerator","Popover","_this","isHidden","margin","documentMousedown","ev","el","contains","target","hide","show","render","style","display","position","trigger","createElement","className","top","left","content","parentEl","appendChild","listenBySelector","autoHide","document","addEventListener","destroy","removeElement","removeEventListener","elDims","getBoundingClientRect","origin","computeRect","offsetParent","clippingRect","computeClippingRect","undefined","right","width","min","bottom","height","max","applyStyle","name","slice","SimpleDayGridEventRenderer","renderSegHtml","seg","mirrorInfo","context","eventRange","eventDef","def","eventUi","ui","allDay","isDraggable","startEditable","isResizableFromStart","isStart","durationEditable","eventResizableFromStart","isResizableFromEnd","isEnd","classes","getSegClasses","skinCss","cssToStr","getSkinCss","timeHtml","timeText","titleHtml","unshift","getTimeText","htmlEscape","title","join","url","dir","computeEventTimeFormat","hour","minute","omitZeroMinute","meridiem","computeDisplayEventEnd","FgEventRenderer","DayGridEventRenderer","dayGrid","attachSegs","segs","rowStructs","renderSegRows","rowEls","forEach","rowNode","querySelector","tbodyEl","removeSegPopover","detachSegs","rowStruct","pop","segRows","row","groupSegRows","push","renderSegRow","rowSegs","colCnt","isRtl","segLevels","buildSegLevels","levelCnt","tbody","segMatrix","cellMatrix","loneCellMatrix","levelSegs","col","tr","j","td","emptyCellsUntil","endCol","rowSpan","leftCol","lastCol","firstCol","rightCol","colSpan","introHtml","renderProps","renderIntroHtml","appendToElement","prependToElement","_a","levels","sortEventSegs","isDaySegCollision","level","sort","compareDaySegCols","otherSegs","otherSeg","a","DayGridMirrorRenderer","sourceSeg","skeletonEl","htmlToElement","skeletonTopEl","skeletonTop","DayGridFillRenderer","fillSegTag","renderSegs","type","filter","els","renderFillRow","startCol","trEl","toLowerCase","getElementsByTagName","FillRenderer","DayTile","eventRenderer","DayTileEventRenderer","renderFrame","memoizeRendering","_renderFrame","renderFgEvents","bind","unrender","renderEventSelection","selectByInstanceId","unselectByInstanceId","renderEventDrag","hideByHash","showByHash","renderEventResize","calendar","registerInteractiveComponent","useEventCenter","props","date","fgSegs","eventSelection","eventDragInstances","eventResizeInstances","unregisterInteractiveComponent","theme","format","createFormatter","opt","innerHTML","getClass","getIconClass","segContainerEl","queryHit","positionLeft","positionTop","elWidth","elHeight","component","dateSpan","range","addDays","dayEl","rect","layer","DateComponent","dayTile","_i","segs_1","segs_2","DayBgRow","renderHtml","parts","cells","cell","renderCellHtml","dateProfile","htmlAttrs","reverse","otherAttrs","isDateValid","rangeContainsMarker","activeRange","getDayClasses","formatIso","omitTime","DAY_NUM_FORMAT","day","WEEK_NUM_FORMAT","week","DayGrid","bottomCoordPadding","isCellSizesDirty","fillRenderer","mirrorRenderer","renderCells","_renderCells","_unrenderCells","renderBusinessHours","renderDateSelection","renderBgEvents","_renderEventDrag","_unrenderEventDrag","_renderEventResize","_unrenderEventResize","isRigid","businessHourSegs","dateSelectionSegs","bgEventSegs","fgEventSegs","eventDrag","eventResize","segPopoverTile","updateSegPopoverTile","getCellRange","ownProps","receiveProps","affectedInstances","view","_b","html","renderDayRowHtml","findElements","cellEls","rowPositions","PositionCache","colPositions","publiclyTrigger","toDate","getCellEl","bgRow","renderBgIntroHtml","getIsNumbersVisible","renderNumberTrHtml","getIsDayNumbersVisible","cellWeekNumbersVisible","colWeekNumbersVisible","intro","renderNumberIntroHtml","renderNumberCellsHtml","htmls","renderNumberCellHtml","isDayNumberVisible","weekCalcFirstDow","weekDow","getUTCDay","buildGotoAnchorHtml","updateSize","isResize","buildColPositions","buildRowPositions","computeSizes","assignSizes","build","bottoms","positionToHit","leftPosition","topPosition","leftToIndex","topToIndex","relativeRect","lefts","rights","tops","state","isResizing","segPopover","limitRows","levelLimit","rowLevelLimit","unlimitRow","computeRowLevelLimit","limitRow","rowEl","rowBottom","trEls","findChildren","classList","remove","moreNodes","limitedNodes","segsBelow","totalSegsBelow","colSegsBelow","segMoreNodes","moreTd","moreWrap","moreLink","getCellSegs","renderMoreLink","node","add","concat","insertAfterElement","moreEls","limitedEls","limitedEl","hiddenSegs","innerText","getMoreLinkText","clickOption","_col","moreEl","currentTarget","allSegs","reslicedAllSegs","resliceDaySegs","reslicedHiddenSegs","jsEvent","showSegPopover","zoomTo","parentNode","topEl","releaseAfterSizingTriggers","dayDate","dayStart","dayEnd","dayRange","newSegs","origRange","slicedRange","intersectRanges","instance","num","startLevel","WEEK_NUM_FORMAT$1","DayGridView","viewSpec","dateProfileGenerator","renderHeadIntroHtml","weekNumberStyleAttr","renderDayGridNumberIntroHtml","weekStart","forceOff","renderDayGridBgIntroHtml","renderDayGridIntroHtml","renderSkeletonHtml","scroller","ScrollComponent","dayGridContainerEl","dayGridEl","weekNumberWidth","hasRigidRows","eventLimit","viewHeight","isAuto","updateBaseSize","headRowEl","header","scrollerHeight","scrollbarWidths","computeScrollerHeight","setHeight","matchCellWidths","clear","uncompensateScroll","setGridHeight","getScrollbarWidths","compensateScroll","lockOverflow","subtractInnerElHeight","distributeHeight","undistributeHeight","computeInitialDateScroll","queryDateScroll","getScrollTop","applyDateScroll","scroll","setScrollTop","View","dateProfileGeneratorClass","SimpleDayGrid","slicer","DayGridSlicer","dayTable","sliceProps","nextDayThreshold","rawHit","sliceRange","dateRange","Slicer","DayGridView$1","_context","buildDayTable","memoize","DayHeader","simpleDayGrid","dates","headerDates","datesRepDistinctDays","businessHours","dateSelection","eventStore","eventUiBases","daySeries","DaySeries","DayTable","main","createPlugin","defaultView","views","dayGridDay","duration","days","dayGridWeek","weeks","dayGridMonth","months","default","AbstractDayGridView","buildBasicDayTable","defineProperty","value"],"mappings":"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","sourcesContent":["/*!\n@fullcalendar/daygrid v4.0.1\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@fullcalendar/core')) :\n    typeof define === 'function' && define.amd ? define(['exports', '@fullcalendar/core'], factory) :\n    (global = global || self, factory(global.FullCalendarDayGrid = {}, global.FullCalendar));\n}(this, function (exports, core) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\n\n    var DayGridDateProfileGenerator = /** @class */ (function (_super) {\n        __extends(DayGridDateProfileGenerator, _super);\n        function DayGridDateProfileGenerator() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        // Computes the date range that will be rendered.\n        DayGridDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n            var dateEnv = this.dateEnv;\n            var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n            var start = renderRange.start;\n            var end = renderRange.end;\n            var endOfWeek;\n            // year and month views should be aligned with weeks. this is already done for week\n            if (/^(year|month)$/.test(currentRangeUnit)) {\n                start = dateEnv.startOfWeek(start);\n                // make end-of-week if not already\n                endOfWeek = dateEnv.startOfWeek(end);\n                if (endOfWeek.valueOf() !== end.valueOf()) {\n                    end = core.addWeeks(endOfWeek, 1);\n                }\n            }\n            // ensure 6 weeks\n            if (this.options.monthMode &&\n                this.options.fixedWeekCount) {\n                var rowCnt = Math.ceil(// could be partial weeks due to hiddenDays\n                core.diffWeeks(start, end));\n                end = core.addWeeks(end, 6 - rowCnt);\n            }\n            return { start: start, end: end };\n        };\n        return DayGridDateProfileGenerator;\n    }(core.DateProfileGenerator));\n\n    /* A rectangular panel that is absolutely positioned over other content\n    ------------------------------------------------------------------------------------------------------------------------\n    Options:\n      - className (string)\n      - content (HTML string, element, or element array)\n      - parentEl\n      - top\n      - left\n      - right (the x coord of where the right edge should be. not a \"CSS\" right)\n      - autoHide (boolean)\n      - show (callback)\n      - hide (callback)\n    */\n    var Popover = /** @class */ (function () {\n        function Popover(options) {\n            var _this = this;\n            this.isHidden = true;\n            this.margin = 10; // the space required between the popover and the edges of the scroll container\n            // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n            this.documentMousedown = function (ev) {\n                // only hide the popover if the click happened outside the popover\n                if (_this.el && !_this.el.contains(ev.target)) {\n                    _this.hide();\n                }\n            };\n            this.options = options;\n        }\n        // Shows the popover on the specified position. Renders it if not already\n        Popover.prototype.show = function () {\n            if (this.isHidden) {\n                if (!this.el) {\n                    this.render();\n                }\n                this.el.style.display = '';\n                this.position();\n                this.isHidden = false;\n                this.trigger('show');\n            }\n        };\n        // Hides the popover, through CSS, but does not remove it from the DOM\n        Popover.prototype.hide = function () {\n            if (!this.isHidden) {\n                this.el.style.display = 'none';\n                this.isHidden = true;\n                this.trigger('hide');\n            }\n        };\n        // Creates `this.el` and renders content inside of it\n        Popover.prototype.render = function () {\n            var _this = this;\n            var options = this.options;\n            var el = this.el = core.createElement('div', {\n                className: 'fc-popover ' + (options.className || ''),\n                style: {\n                    top: '0',\n                    left: '0'\n                }\n            });\n            if (typeof options.content === 'function') {\n                options.content(el);\n            }\n            options.parentEl.appendChild(el);\n            // when a click happens on anything inside with a 'fc-close' className, hide the popover\n            core.listenBySelector(el, 'click', '.fc-close', function (ev) {\n                _this.hide();\n            });\n            if (options.autoHide) {\n                document.addEventListener('mousedown', this.documentMousedown);\n            }\n        };\n        // Hides and unregisters any handlers\n        Popover.prototype.destroy = function () {\n            this.hide();\n            if (this.el) {\n                core.removeElement(this.el);\n                this.el = null;\n            }\n            document.removeEventListener('mousedown', this.documentMousedown);\n        };\n        // Positions the popover optimally, using the top/left/right options\n        Popover.prototype.position = function () {\n            var options = this.options;\n            var el = this.el;\n            var elDims = el.getBoundingClientRect(); // only used for width,height\n            var origin = core.computeRect(el.offsetParent);\n            var clippingRect = core.computeClippingRect(options.parentEl);\n            var top; // the \"position\" (not \"offset\") values for the popover\n            var left; //\n            // compute top and left\n            top = options.top || 0;\n            if (options.left !== undefined) {\n                left = options.left;\n            }\n            else if (options.right !== undefined) {\n                left = options.right - elDims.width; // derive the left value from the right value\n            }\n            else {\n                left = 0;\n            }\n            // constrain to the view port. if constrained by two edges, give precedence to top/left\n            top = Math.min(top, clippingRect.bottom - elDims.height - this.margin);\n            top = Math.max(top, clippingRect.top + this.margin);\n            left = Math.min(left, clippingRect.right - elDims.width - this.margin);\n            left = Math.max(left, clippingRect.left + this.margin);\n            core.applyStyle(el, {\n                top: top - origin.top,\n                left: left - origin.left\n            });\n        };\n        // Triggers a callback. Calls a function in the option hash of the same name.\n        // Arguments beyond the first `name` are forwarded on.\n        // TODO: better code reuse for this. Repeat code\n        // can kill this???\n        Popover.prototype.trigger = function (name) {\n            if (this.options[name]) {\n                this.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n            }\n        };\n        return Popover;\n    }());\n\n    /* Event-rendering methods for the DayGrid class\n    ----------------------------------------------------------------------------------------------------------------------*/\n    // \"Simple\" is bad a name. has nothing to do with SimpleDayGrid\n    var SimpleDayGridEventRenderer = /** @class */ (function (_super) {\n        __extends(SimpleDayGridEventRenderer, _super);\n        function SimpleDayGridEventRenderer() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        // Builds the HTML to be used for the default element for an individual segment\n        SimpleDayGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n            var options = this.context.options;\n            var eventRange = seg.eventRange;\n            var eventDef = eventRange.def;\n            var eventUi = eventRange.ui;\n            var allDay = eventDef.allDay;\n            var isDraggable = eventUi.startEditable;\n            var isResizableFromStart = allDay && seg.isStart && eventUi.durationEditable && options.eventResizableFromStart;\n            var isResizableFromEnd = allDay && seg.isEnd && eventUi.durationEditable;\n            var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n            var skinCss = core.cssToStr(this.getSkinCss(eventUi));\n            var timeHtml = '';\n            var timeText;\n            var titleHtml;\n            classes.unshift('fc-day-grid-event', 'fc-h-event');\n            // Only display a timed events time if it is the starting segment\n            if (seg.isStart) {\n                timeText = this.getTimeText(eventRange);\n                if (timeText) {\n                    timeHtml = '<span class=\"fc-time\">' + core.htmlEscape(timeText) + '</span>';\n                }\n            }\n            titleHtml =\n                '<span class=\"fc-title\">' +\n                    (core.htmlEscape(eventDef.title || '') || '&nbsp;') + // we always want one line of height\n                    '</span>';\n            return '<a class=\"' + classes.join(' ') + '\"' +\n                (eventDef.url ?\n                    ' href=\"' + core.htmlEscape(eventDef.url) + '\"' :\n                    '') +\n                (skinCss ?\n                    ' style=\"' + skinCss + '\"' :\n                    '') +\n                '>' +\n                '<div class=\"fc-content\">' +\n                (options.dir === 'rtl' ?\n                    titleHtml + ' ' + timeHtml : // put a natural space in between\n                    timeHtml + ' ' + titleHtml //\n                ) +\n                '</div>' +\n                (isResizableFromStart ?\n                    '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n                    '') +\n                (isResizableFromEnd ?\n                    '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                    '') +\n                '</a>';\n        };\n        // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n        SimpleDayGridEventRenderer.prototype.computeEventTimeFormat = function () {\n            return {\n                hour: 'numeric',\n                minute: '2-digit',\n                omitZeroMinute: true,\n                meridiem: 'narrow'\n            };\n        };\n        SimpleDayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n            return false; // TODO: somehow consider the originating DayGrid's column count\n        };\n        return SimpleDayGridEventRenderer;\n    }(core.FgEventRenderer));\n\n    /* Event-rendering methods for the DayGrid class\n    ----------------------------------------------------------------------------------------------------------------------*/\n    var DayGridEventRenderer = /** @class */ (function (_super) {\n        __extends(DayGridEventRenderer, _super);\n        function DayGridEventRenderer(dayGrid) {\n            var _this = _super.call(this, dayGrid.context) || this;\n            _this.dayGrid = dayGrid;\n            return _this;\n        }\n        // Renders the given foreground event segments onto the grid\n        DayGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n            var rowStructs = this.rowStructs = this.renderSegRows(segs);\n            // append to each row's content skeleton\n            this.dayGrid.rowEls.forEach(function (rowNode, i) {\n                rowNode.querySelector('.fc-content-skeleton > table').appendChild(rowStructs[i].tbodyEl);\n            });\n            // removes the \"more..\" events popover\n            if (!mirrorInfo) {\n                this.dayGrid.removeSegPopover();\n            }\n        };\n        // Unrenders all currently rendered foreground event segments\n        DayGridEventRenderer.prototype.detachSegs = function () {\n            var rowStructs = this.rowStructs || [];\n            var rowStruct;\n            while ((rowStruct = rowStructs.pop())) {\n                core.removeElement(rowStruct.tbodyEl);\n            }\n            this.rowStructs = null;\n        };\n        // Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\n        // Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\n        // PRECONDITION: each segment shoud already have a rendered and assigned `.el`\n        DayGridEventRenderer.prototype.renderSegRows = function (segs) {\n            var rowStructs = [];\n            var segRows;\n            var row;\n            segRows = this.groupSegRows(segs); // group into nested arrays\n            // iterate each row of segment groupings\n            for (row = 0; row < segRows.length; row++) {\n                rowStructs.push(this.renderSegRow(row, segRows[row]));\n            }\n            return rowStructs;\n        };\n        // Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\n        // the segments. Returns object with a bunch of internal data about how the render was calculated.\n        // NOTE: modifies rowSegs\n        DayGridEventRenderer.prototype.renderSegRow = function (row, rowSegs) {\n            var dayGrid = this.dayGrid;\n            var colCnt = dayGrid.colCnt, isRtl = dayGrid.isRtl;\n            var segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\n            var levelCnt = Math.max(1, segLevels.length); // ensure at least one level\n            var tbody = document.createElement('tbody');\n            var segMatrix = []; // lookup for which segments are rendered into which level+col cells\n            var cellMatrix = []; // lookup for all <td> elements of the level+col matrix\n            var loneCellMatrix = []; // lookup for <td> elements that only take up a single column\n            var i;\n            var levelSegs;\n            var col;\n            var tr;\n            var j;\n            var seg;\n            var td;\n            // populates empty cells from the current column (`col`) to `endCol`\n            function emptyCellsUntil(endCol) {\n                while (col < endCol) {\n                    // try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\n                    td = (loneCellMatrix[i - 1] || [])[col];\n                    if (td) {\n                        td.rowSpan = (td.rowSpan || 1) + 1;\n                    }\n                    else {\n                        td = document.createElement('td');\n                        tr.appendChild(td);\n                    }\n                    cellMatrix[i][col] = td;\n                    loneCellMatrix[i][col] = td;\n                    col++;\n                }\n            }\n            for (i = 0; i < levelCnt; i++) { // iterate through all levels\n                levelSegs = segLevels[i];\n                col = 0;\n                tr = document.createElement('tr');\n                segMatrix.push([]);\n                cellMatrix.push([]);\n                loneCellMatrix.push([]);\n                // levelCnt might be 1 even though there are no actual levels. protect against this.\n                // this single empty row is useful for styling.\n                if (levelSegs) {\n                    for (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\n                        seg = levelSegs[j];\n                        var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                        var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                        emptyCellsUntil(leftCol);\n                        // create a container that occupies or more columns. append the event element.\n                        td = core.createElement('td', { className: 'fc-event-container' }, seg.el);\n                        if (leftCol !== rightCol) {\n                            td.colSpan = rightCol - leftCol + 1;\n                        }\n                        else { // a single-column segment\n                            loneCellMatrix[i][col] = td;\n                        }\n                        while (col <= rightCol) {\n                            cellMatrix[i][col] = td;\n                            segMatrix[i][col] = seg;\n                            col++;\n                        }\n                        tr.appendChild(td);\n                    }\n                }\n                emptyCellsUntil(colCnt); // finish off the row\n                var introHtml = dayGrid.renderProps.renderIntroHtml();\n                if (introHtml) {\n                    if (dayGrid.isRtl) {\n                        core.appendToElement(tr, introHtml);\n                    }\n                    else {\n                        core.prependToElement(tr, introHtml);\n                    }\n                }\n                tbody.appendChild(tr);\n            }\n            return {\n                row: row,\n                tbodyEl: tbody,\n                cellMatrix: cellMatrix,\n                segMatrix: segMatrix,\n                segLevels: segLevels,\n                segs: rowSegs\n            };\n        };\n        // Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\n        // NOTE: modifies segs\n        DayGridEventRenderer.prototype.buildSegLevels = function (segs) {\n            var _a = this.dayGrid, isRtl = _a.isRtl, colCnt = _a.colCnt;\n            var levels = [];\n            var i;\n            var seg;\n            var j;\n            // Give preference to elements with certain criteria, so they have\n            // a chance to be closer to the top.\n            segs = this.sortEventSegs(segs);\n            for (i = 0; i < segs.length; i++) {\n                seg = segs[i];\n                // loop through levels, starting with the topmost, until the segment doesn't collide with other segments\n                for (j = 0; j < levels.length; j++) {\n                    if (!isDaySegCollision(seg, levels[j])) {\n                        break;\n                    }\n                }\n                // `j` now holds the desired subrow index\n                seg.level = j;\n                seg.leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol; // for sorting only\n                seg.rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol // for sorting only\n                ;\n                (levels[j] || (levels[j] = [])).push(seg);\n            }\n            // order segments left-to-right. very important if calendar is RTL\n            for (j = 0; j < levels.length; j++) {\n                levels[j].sort(compareDaySegCols);\n            }\n            return levels;\n        };\n        // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\n        DayGridEventRenderer.prototype.groupSegRows = function (segs) {\n            var segRows = [];\n            var i;\n            for (i = 0; i < this.dayGrid.rowCnt; i++) {\n                segRows.push([]);\n            }\n            for (i = 0; i < segs.length; i++) {\n                segRows[segs[i].row].push(segs[i]);\n            }\n            return segRows;\n        };\n        // Computes a default `displayEventEnd` value if one is not expliclty defined\n        DayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n            return this.dayGrid.colCnt === 1; // we'll likely have space if there's only one day\n        };\n        return DayGridEventRenderer;\n    }(SimpleDayGridEventRenderer));\n    // Computes whether two segments' columns collide. They are assumed to be in the same row.\n    function isDaySegCollision(seg, otherSegs) {\n        var i;\n        var otherSeg;\n        for (i = 0; i < otherSegs.length; i++) {\n            otherSeg = otherSegs[i];\n            if (otherSeg.firstCol <= seg.lastCol &&\n                otherSeg.lastCol >= seg.firstCol) {\n                return true;\n            }\n        }\n        return false;\n    }\n    // A cmp function for determining the leftmost event\n    function compareDaySegCols(a, b) {\n        return a.leftCol - b.leftCol;\n    }\n\n    var DayGridMirrorRenderer = /** @class */ (function (_super) {\n        __extends(DayGridMirrorRenderer, _super);\n        function DayGridMirrorRenderer() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        DayGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n            var sourceSeg = mirrorInfo.sourceSeg;\n            var rowStructs = this.rowStructs = this.renderSegRows(segs);\n            // inject each new event skeleton into each associated row\n            this.dayGrid.rowEls.forEach(function (rowNode, row) {\n                var skeletonEl = core.htmlToElement('<div class=\"fc-mirror-skeleton\"><table></table></div>'); // will be absolutely positioned\n                var skeletonTopEl;\n                var skeletonTop;\n                // If there is an original segment, match the top position. Otherwise, put it at the row's top level\n                if (sourceSeg && sourceSeg.row === row) {\n                    skeletonTopEl = sourceSeg.el;\n                }\n                else {\n                    skeletonTopEl = rowNode.querySelector('.fc-content-skeleton tbody');\n                    if (!skeletonTopEl) { // when no events\n                        skeletonTopEl = rowNode.querySelector('.fc-content-skeleton table');\n                    }\n                }\n                skeletonTop = skeletonTopEl.getBoundingClientRect().top -\n                    rowNode.getBoundingClientRect().top; // the offsetParent origin\n                skeletonEl.style.top = skeletonTop + 'px';\n                skeletonEl.querySelector('table').appendChild(rowStructs[row].tbodyEl);\n                rowNode.appendChild(skeletonEl);\n            });\n        };\n        return DayGridMirrorRenderer;\n    }(DayGridEventRenderer));\n\n    var DayGridFillRenderer = /** @class */ (function (_super) {\n        __extends(DayGridFillRenderer, _super);\n        function DayGridFillRenderer(dayGrid) {\n            var _this = _super.call(this, dayGrid.context) || this;\n            _this.fillSegTag = 'td'; // override the default tag name\n            _this.dayGrid = dayGrid;\n            return _this;\n        }\n        DayGridFillRenderer.prototype.renderSegs = function (type, segs) {\n            // don't render timed background events\n            if (type === 'bgEvent') {\n                segs = segs.filter(function (seg) {\n                    return seg.eventRange.def.allDay;\n                });\n            }\n            _super.prototype.renderSegs.call(this, type, segs);\n        };\n        DayGridFillRenderer.prototype.attachSegs = function (type, segs) {\n            var els = [];\n            var i;\n            var seg;\n            var skeletonEl;\n            for (i = 0; i < segs.length; i++) {\n                seg = segs[i];\n                skeletonEl = this.renderFillRow(type, seg);\n                this.dayGrid.rowEls[seg.row].appendChild(skeletonEl);\n                els.push(skeletonEl);\n            }\n            return els;\n        };\n        // Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\n        DayGridFillRenderer.prototype.renderFillRow = function (type, seg) {\n            var dayGrid = this.dayGrid;\n            var colCnt = dayGrid.colCnt, isRtl = dayGrid.isRtl;\n            var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n            var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n            var startCol = leftCol;\n            var endCol = rightCol + 1;\n            var className;\n            var skeletonEl;\n            var trEl;\n            if (type === 'businessHours') {\n                className = 'bgevent';\n            }\n            else {\n                className = type.toLowerCase();\n            }\n            skeletonEl = core.htmlToElement('<div class=\"fc-' + className + '-skeleton\">' +\n                '<table><tr></tr></table>' +\n                '</div>');\n            trEl = skeletonEl.getElementsByTagName('tr')[0];\n            if (startCol > 0) {\n                core.appendToElement(trEl, \n                // will create (startCol + 1) td's\n                new Array(startCol + 1).join('<td></td>'));\n            }\n            seg.el.colSpan = endCol - startCol;\n            trEl.appendChild(seg.el);\n            if (endCol < colCnt) {\n                core.appendToElement(trEl, \n                // will create (colCnt - endCol) td's\n                new Array(colCnt - endCol + 1).join('<td></td>'));\n            }\n            var introHtml = dayGrid.renderProps.renderIntroHtml();\n            if (introHtml) {\n                if (dayGrid.isRtl) {\n                    core.appendToElement(trEl, introHtml);\n                }\n                else {\n                    core.prependToElement(trEl, introHtml);\n                }\n            }\n            return skeletonEl;\n        };\n        return DayGridFillRenderer;\n    }(core.FillRenderer));\n\n    var DayTile = /** @class */ (function (_super) {\n        __extends(DayTile, _super);\n        function DayTile(context, el) {\n            var _this = _super.call(this, context, el) || this;\n            var eventRenderer = _this.eventRenderer = new DayTileEventRenderer(_this);\n            var renderFrame = _this.renderFrame = core.memoizeRendering(_this._renderFrame);\n            _this.renderFgEvents = core.memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderFrame]);\n            _this.renderEventSelection = core.memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n            _this.renderEventDrag = core.memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n            _this.renderEventResize = core.memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n            context.calendar.registerInteractiveComponent(_this, {\n                el: _this.el,\n                useEventCenter: false\n            });\n            return _this;\n        }\n        DayTile.prototype.render = function (props) {\n            this.renderFrame(props.date);\n            this.renderFgEvents(props.fgSegs);\n            this.renderEventSelection(props.eventSelection);\n            this.renderEventDrag(props.eventDragInstances);\n            this.renderEventResize(props.eventResizeInstances);\n        };\n        DayTile.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.renderFrame.unrender(); // should unrender everything else\n            this.calendar.unregisterInteractiveComponent(this);\n        };\n        DayTile.prototype._renderFrame = function (date) {\n            var _a = this, theme = _a.theme, dateEnv = _a.dateEnv;\n            var title = dateEnv.format(date, core.createFormatter(this.opt('dayPopoverFormat')) // TODO: cache\n            );\n            this.el.innerHTML =\n                '<div class=\"fc-header ' + theme.getClass('popoverHeader') + '\">' +\n                    '<span class=\"fc-title\">' +\n                    core.htmlEscape(title) +\n                    '</span>' +\n                    '<span class=\"fc-close ' + theme.getIconClass('close') + '\"></span>' +\n                    '</div>' +\n                    '<div class=\"fc-body ' + theme.getClass('popoverContent') + '\">' +\n                    '<div class=\"fc-event-container\"></div>' +\n                    '</div>';\n            this.segContainerEl = this.el.querySelector('.fc-event-container');\n        };\n        DayTile.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n            var date = this.props.date; // HACK\n            if (positionLeft < elWidth && positionTop < elHeight) {\n                return {\n                    component: this,\n                    dateSpan: {\n                        allDay: true,\n                        range: { start: date, end: core.addDays(date, 1) }\n                    },\n                    dayEl: this.el,\n                    rect: {\n                        left: 0,\n                        top: 0,\n                        right: elWidth,\n                        bottom: elHeight\n                    },\n                    layer: 1\n                };\n            }\n        };\n        return DayTile;\n    }(core.DateComponent));\n    var DayTileEventRenderer = /** @class */ (function (_super) {\n        __extends(DayTileEventRenderer, _super);\n        function DayTileEventRenderer(dayTile) {\n            var _this = _super.call(this, dayTile.context) || this;\n            _this.dayTile = dayTile;\n            return _this;\n        }\n        DayTileEventRenderer.prototype.attachSegs = function (segs) {\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                this.dayTile.segContainerEl.appendChild(seg.el);\n            }\n        };\n        DayTileEventRenderer.prototype.detachSegs = function (segs) {\n            for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n                var seg = segs_2[_i];\n                core.removeElement(seg.el);\n            }\n        };\n        return DayTileEventRenderer;\n    }(SimpleDayGridEventRenderer));\n\n    var DayBgRow = /** @class */ (function () {\n        function DayBgRow(context) {\n            this.context = context;\n        }\n        DayBgRow.prototype.renderHtml = function (props) {\n            var parts = [];\n            if (props.renderIntroHtml) {\n                parts.push(props.renderIntroHtml());\n            }\n            for (var _i = 0, _a = props.cells; _i < _a.length; _i++) {\n                var cell = _a[_i];\n                parts.push(renderCellHtml(cell.date, props.dateProfile, this.context, cell.htmlAttrs));\n            }\n            if (!props.cells.length) {\n                parts.push('<td class=\"fc-day ' + this.context.theme.getClass('widgetContent') + '\"></td>');\n            }\n            if (this.context.options.dir === 'rtl') {\n                parts.reverse();\n            }\n            return '<tr>' + parts.join('') + '</tr>';\n        };\n        return DayBgRow;\n    }());\n    function renderCellHtml(date, dateProfile, context, otherAttrs) {\n        var dateEnv = context.dateEnv, theme = context.theme;\n        var isDateValid = core.rangeContainsMarker(dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n        var classes = core.getDayClasses(date, dateProfile, context);\n        classes.unshift('fc-day', theme.getClass('widgetContent'));\n        return '<td class=\"' + classes.join(' ') + '\"' +\n            (isDateValid ?\n                ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n                '') +\n            (otherAttrs ?\n                ' ' + otherAttrs :\n                '') +\n            '></td>';\n    }\n\n    var DAY_NUM_FORMAT = core.createFormatter({ day: 'numeric' });\n    var WEEK_NUM_FORMAT = core.createFormatter({ week: 'numeric' });\n    var DayGrid = /** @class */ (function (_super) {\n        __extends(DayGrid, _super);\n        function DayGrid(context, el, renderProps) {\n            var _this = _super.call(this, context, el) || this;\n            _this.bottomCoordPadding = 0; // hack for extending the hit area for the last row of the coordinate grid\n            _this.isCellSizesDirty = false;\n            var eventRenderer = _this.eventRenderer = new DayGridEventRenderer(_this);\n            var fillRenderer = _this.fillRenderer = new DayGridFillRenderer(_this);\n            _this.mirrorRenderer = new DayGridMirrorRenderer(_this);\n            var renderCells = _this.renderCells = core.memoizeRendering(_this._renderCells, _this._unrenderCells);\n            _this.renderBusinessHours = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderCells]);\n            _this.renderDateSelection = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'highlight'), fillRenderer.unrender.bind(fillRenderer, 'highlight'), [renderCells]);\n            _this.renderBgEvents = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderCells]);\n            _this.renderFgEvents = core.memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderCells]);\n            _this.renderEventSelection = core.memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n            _this.renderEventDrag = core.memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderCells]);\n            _this.renderEventResize = core.memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderCells]);\n            _this.renderProps = renderProps;\n            return _this;\n        }\n        DayGrid.prototype.render = function (props) {\n            var cells = props.cells;\n            this.rowCnt = cells.length;\n            this.colCnt = cells[0].length;\n            this.renderCells(cells, props.isRigid);\n            this.renderBusinessHours(props.businessHourSegs);\n            this.renderDateSelection(props.dateSelectionSegs);\n            this.renderBgEvents(props.bgEventSegs);\n            this.renderFgEvents(props.fgEventSegs);\n            this.renderEventSelection(props.eventSelection);\n            this.renderEventDrag(props.eventDrag);\n            this.renderEventResize(props.eventResize);\n            if (this.segPopoverTile) {\n                this.updateSegPopoverTile();\n            }\n        };\n        DayGrid.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.renderCells.unrender(); // will unrender everything else\n        };\n        DayGrid.prototype.getCellRange = function (row, col) {\n            var start = this.props.cells[row][col].date;\n            var end = core.addDays(start, 1);\n            return { start: start, end: end };\n        };\n        DayGrid.prototype.updateSegPopoverTile = function (date, segs) {\n            var ownProps = this.props;\n            this.segPopoverTile.receiveProps({\n                date: date || this.segPopoverTile.props.date,\n                fgSegs: segs || this.segPopoverTile.props.fgSegs,\n                eventSelection: ownProps.eventSelection,\n                eventDragInstances: ownProps.eventDrag ? ownProps.eventDrag.affectedInstances : null,\n                eventResizeInstances: ownProps.eventResize ? ownProps.eventResize.affectedInstances : null\n            });\n        };\n        /* Date Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype._renderCells = function (cells, isRigid) {\n            var _a = this, view = _a.view, dateEnv = _a.dateEnv;\n            var _b = this, rowCnt = _b.rowCnt, colCnt = _b.colCnt;\n            var html = '';\n            var row;\n            var col;\n            for (row = 0; row < rowCnt; row++) {\n                html += this.renderDayRowHtml(row, isRigid);\n            }\n            this.el.innerHTML = html;\n            this.rowEls = core.findElements(this.el, '.fc-row');\n            this.cellEls = core.findElements(this.el, '.fc-day, .fc-disabled-day');\n            if (this.isRtl) {\n                this.cellEls.reverse();\n            }\n            this.rowPositions = new core.PositionCache(this.el, this.rowEls, false, true // vertical\n            );\n            this.colPositions = new core.PositionCache(this.el, this.cellEls.slice(0, colCnt), // only the first row\n            true, false // horizontal\n            );\n            // trigger dayRender with each cell's element\n            for (row = 0; row < rowCnt; row++) {\n                for (col = 0; col < colCnt; col++) {\n                    this.publiclyTrigger('dayRender', [\n                        {\n                            date: dateEnv.toDate(cells[row][col].date),\n                            el: this.getCellEl(row, col),\n                            view: view\n                        }\n                    ]);\n                }\n            }\n            this.isCellSizesDirty = true;\n        };\n        DayGrid.prototype._unrenderCells = function () {\n            this.removeSegPopover();\n        };\n        // Generates the HTML for a single row, which is a div that wraps a table.\n        // `row` is the row number.\n        DayGrid.prototype.renderDayRowHtml = function (row, isRigid) {\n            var theme = this.theme;\n            var classes = ['fc-row', 'fc-week', theme.getClass('dayRow')];\n            if (isRigid) {\n                classes.push('fc-rigid');\n            }\n            var bgRow = new DayBgRow(this.context);\n            return '' +\n                '<div class=\"' + classes.join(' ') + '\">' +\n                '<div class=\"fc-bg\">' +\n                '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                bgRow.renderHtml({\n                    cells: this.props.cells[row],\n                    dateProfile: this.props.dateProfile,\n                    renderIntroHtml: this.renderProps.renderBgIntroHtml\n                }) +\n                '</table>' +\n                '</div>' +\n                '<div class=\"fc-content-skeleton\">' +\n                '<table>' +\n                (this.getIsNumbersVisible() ?\n                    '<thead>' +\n                        this.renderNumberTrHtml(row) +\n                        '</thead>' :\n                    '') +\n                '</table>' +\n                '</div>' +\n                '</div>';\n        };\n        DayGrid.prototype.getIsNumbersVisible = function () {\n            return this.getIsDayNumbersVisible() ||\n                this.renderProps.cellWeekNumbersVisible ||\n                this.renderProps.colWeekNumbersVisible;\n        };\n        DayGrid.prototype.getIsDayNumbersVisible = function () {\n            return this.rowCnt > 1;\n        };\n        /* Grid Number Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype.renderNumberTrHtml = function (row) {\n            var intro = this.renderProps.renderNumberIntroHtml(row, this);\n            return '' +\n                '<tr>' +\n                (this.isRtl ? '' : intro) +\n                this.renderNumberCellsHtml(row) +\n                (this.isRtl ? intro : '') +\n                '</tr>';\n        };\n        DayGrid.prototype.renderNumberCellsHtml = function (row) {\n            var htmls = [];\n            var col;\n            var date;\n            for (col = 0; col < this.colCnt; col++) {\n                date = this.props.cells[row][col].date;\n                htmls.push(this.renderNumberCellHtml(date));\n            }\n            if (this.isRtl) {\n                htmls.reverse();\n            }\n            return htmls.join('');\n        };\n        // Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\n        // The number row will only exist if either day numbers or week numbers are turned on.\n        DayGrid.prototype.renderNumberCellHtml = function (date) {\n            var _a = this, view = _a.view, dateEnv = _a.dateEnv;\n            var html = '';\n            var isDateValid = core.rangeContainsMarker(this.props.dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n            var isDayNumberVisible = this.getIsDayNumbersVisible() && isDateValid;\n            var classes;\n            var weekCalcFirstDow;\n            if (!isDayNumberVisible && !this.renderProps.cellWeekNumbersVisible) {\n                // no numbers in day cell (week number must be along the side)\n                return '<td></td>'; //  will create an empty space above events :(\n            }\n            classes = core.getDayClasses(date, this.props.dateProfile, this.context);\n            classes.unshift('fc-day-top');\n            if (this.renderProps.cellWeekNumbersVisible) {\n                weekCalcFirstDow = dateEnv.weekDow;\n            }\n            html += '<td class=\"' + classes.join(' ') + '\"' +\n                (isDateValid ?\n                    ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n                    '') +\n                '>';\n            if (this.renderProps.cellWeekNumbersVisible && (date.getUTCDay() === weekCalcFirstDow)) {\n                html += core.buildGotoAnchorHtml(view, { date: date, type: 'week' }, { 'class': 'fc-week-number' }, dateEnv.format(date, WEEK_NUM_FORMAT) // inner HTML\n                );\n            }\n            if (isDayNumberVisible) {\n                html += core.buildGotoAnchorHtml(view, date, { 'class': 'fc-day-number' }, dateEnv.format(date, DAY_NUM_FORMAT) // inner HTML\n                );\n            }\n            html += '</td>';\n            return html;\n        };\n        /* Sizing\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype.updateSize = function (isResize) {\n            var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n            if (isResize || this.isCellSizesDirty) {\n                this.buildColPositions();\n                this.buildRowPositions();\n                this.isCellSizesDirty = false;\n            }\n            fillRenderer.computeSizes(isResize);\n            eventRenderer.computeSizes(isResize);\n            mirrorRenderer.computeSizes(isResize);\n            fillRenderer.assignSizes(isResize);\n            eventRenderer.assignSizes(isResize);\n            mirrorRenderer.assignSizes(isResize);\n        };\n        DayGrid.prototype.buildColPositions = function () {\n            this.colPositions.build();\n        };\n        DayGrid.prototype.buildRowPositions = function () {\n            this.rowPositions.build();\n            this.rowPositions.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\n        };\n        /* Hit System\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype.positionToHit = function (leftPosition, topPosition) {\n            var _a = this, colPositions = _a.colPositions, rowPositions = _a.rowPositions;\n            var col = colPositions.leftToIndex(leftPosition);\n            var row = rowPositions.topToIndex(topPosition);\n            if (row != null && col != null) {\n                return {\n                    row: row,\n                    col: col,\n                    dateSpan: {\n                        range: this.getCellRange(row, col),\n                        allDay: true\n                    },\n                    dayEl: this.getCellEl(row, col),\n                    relativeRect: {\n                        left: colPositions.lefts[col],\n                        right: colPositions.rights[col],\n                        top: rowPositions.tops[row],\n                        bottom: rowPositions.bottoms[row]\n                    }\n                };\n            }\n        };\n        /* Cell System\n        ------------------------------------------------------------------------------------------------------------------*/\n        // FYI: the first column is the leftmost column, regardless of date\n        DayGrid.prototype.getCellEl = function (row, col) {\n            return this.cellEls[row * this.colCnt + col];\n        };\n        /* Event Drag Visualization\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype._renderEventDrag = function (state) {\n            if (state) {\n                this.eventRenderer.hideByHash(state.affectedInstances);\n                this.fillRenderer.renderSegs('highlight', state.segs);\n            }\n        };\n        DayGrid.prototype._unrenderEventDrag = function (state) {\n            if (state) {\n                this.eventRenderer.showByHash(state.affectedInstances);\n                this.fillRenderer.unrender('highlight');\n            }\n        };\n        /* Event Resize Visualization\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype._renderEventResize = function (state) {\n            if (state) {\n                this.eventRenderer.hideByHash(state.affectedInstances);\n                this.fillRenderer.renderSegs('highlight', state.segs);\n                this.mirrorRenderer.renderSegs(state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n            }\n        };\n        DayGrid.prototype._unrenderEventResize = function (state) {\n            if (state) {\n                this.eventRenderer.showByHash(state.affectedInstances);\n                this.fillRenderer.unrender('highlight');\n                this.mirrorRenderer.unrender(state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n            }\n        };\n        /* More+ Link Popover\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype.removeSegPopover = function () {\n            if (this.segPopover) {\n                this.segPopover.hide(); // in handler, will call segPopover's removeElement\n            }\n        };\n        // Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\n        // `levelLimit` can be false (don't limit), a number, or true (should be computed).\n        DayGrid.prototype.limitRows = function (levelLimit) {\n            var rowStructs = this.eventRenderer.rowStructs || [];\n            var row; // row #\n            var rowLevelLimit;\n            for (row = 0; row < rowStructs.length; row++) {\n                this.unlimitRow(row);\n                if (!levelLimit) {\n                    rowLevelLimit = false;\n                }\n                else if (typeof levelLimit === 'number') {\n                    rowLevelLimit = levelLimit;\n                }\n                else {\n                    rowLevelLimit = this.computeRowLevelLimit(row);\n                }\n                if (rowLevelLimit !== false) {\n                    this.limitRow(row, rowLevelLimit);\n                }\n            }\n        };\n        // Computes the number of levels a row will accomodate without going outside its bounds.\n        // Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\n        // `row` is the row number.\n        DayGrid.prototype.computeRowLevelLimit = function (row) {\n            var rowEl = this.rowEls[row]; // the containing \"fake\" row div\n            var rowBottom = rowEl.getBoundingClientRect().bottom; // relative to viewport!\n            var trEls = core.findChildren(this.eventRenderer.rowStructs[row].tbodyEl);\n            var i;\n            var trEl;\n            // Reveal one level <tr> at a time and stop when we find one out of bounds\n            for (i = 0; i < trEls.length; i++) {\n                trEl = trEls[i];\n                trEl.classList.remove('fc-limited'); // reset to original state (reveal)\n                if (trEl.getBoundingClientRect().bottom > rowBottom) {\n                    return i;\n                }\n            }\n            return false; // should not limit at all\n        };\n        // Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\n        // `row` is the row number.\n        // `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\n        DayGrid.prototype.limitRow = function (row, levelLimit) {\n            var _this = this;\n            var _a = this, colCnt = _a.colCnt, isRtl = _a.isRtl;\n            var rowStruct = this.eventRenderer.rowStructs[row];\n            var moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\n            var col = 0; // col #, left-to-right (not chronologically)\n            var levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\n            var cellMatrix; // a matrix (by level, then column) of all <td> elements in the row\n            var limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\n            var i;\n            var seg;\n            var segsBelow; // array of segment objects below `seg` in the current `col`\n            var totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\n            var colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\n            var td;\n            var rowSpan;\n            var segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\n            var j;\n            var moreTd;\n            var moreWrap;\n            var moreLink;\n            // Iterates through empty level cells and places \"more\" links inside if need be\n            var emptyCellsUntil = function (endCol) {\n                while (col < endCol) {\n                    segsBelow = _this.getCellSegs(row, col, levelLimit);\n                    if (segsBelow.length) {\n                        td = cellMatrix[levelLimit - 1][col];\n                        moreLink = _this.renderMoreLink(row, col, segsBelow);\n                        moreWrap = core.createElement('div', null, moreLink);\n                        td.appendChild(moreWrap);\n                        moreNodes.push(moreWrap[0]);\n                    }\n                    col++;\n                }\n            };\n            if (levelLimit && levelLimit < rowStruct.segLevels.length) { // is it actually over the limit?\n                levelSegs = rowStruct.segLevels[levelLimit - 1];\n                cellMatrix = rowStruct.cellMatrix;\n                limitedNodes = core.findChildren(rowStruct.tbodyEl).slice(levelLimit); // get level <tr> elements past the limit\n                limitedNodes.forEach(function (node) {\n                    node.classList.add('fc-limited'); // hide elements and get a simple DOM-nodes array\n                });\n                // iterate though segments in the last allowable level\n                for (i = 0; i < levelSegs.length; i++) {\n                    seg = levelSegs[i];\n                    var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                    var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                    emptyCellsUntil(leftCol); // process empty cells before the segment\n                    // determine *all* segments below `seg` that occupy the same columns\n                    colSegsBelow = [];\n                    totalSegsBelow = 0;\n                    while (col <= rightCol) {\n                        segsBelow = this.getCellSegs(row, col, levelLimit);\n                        colSegsBelow.push(segsBelow);\n                        totalSegsBelow += segsBelow.length;\n                        col++;\n                    }\n                    if (totalSegsBelow) { // do we need to replace this segment with one or many \"more\" links?\n                        td = cellMatrix[levelLimit - 1][leftCol]; // the segment's parent cell\n                        rowSpan = td.rowSpan || 1;\n                        segMoreNodes = [];\n                        // make a replacement <td> for each column the segment occupies. will be one for each colspan\n                        for (j = 0; j < colSegsBelow.length; j++) {\n                            moreTd = core.createElement('td', { className: 'fc-more-cell', rowSpan: rowSpan });\n                            segsBelow = colSegsBelow[j];\n                            moreLink = this.renderMoreLink(row, leftCol + j, [seg].concat(segsBelow) // count seg as hidden too\n                            );\n                            moreWrap = core.createElement('div', null, moreLink);\n                            moreTd.appendChild(moreWrap);\n                            segMoreNodes.push(moreTd);\n                            moreNodes.push(moreTd);\n                        }\n                        td.classList.add('fc-limited');\n                        core.insertAfterElement(td, segMoreNodes);\n                        limitedNodes.push(td);\n                    }\n                }\n                emptyCellsUntil(this.colCnt); // finish off the level\n                rowStruct.moreEls = moreNodes; // for easy undoing later\n                rowStruct.limitedEls = limitedNodes; // for easy undoing later\n            }\n        };\n        // Reveals all levels and removes all \"more\"-related elements for a grid's row.\n        // `row` is a row number.\n        DayGrid.prototype.unlimitRow = function (row) {\n            var rowStruct = this.eventRenderer.rowStructs[row];\n            if (rowStruct.moreEls) {\n                rowStruct.moreEls.forEach(core.removeElement);\n                rowStruct.moreEls = null;\n            }\n            if (rowStruct.limitedEls) {\n                rowStruct.limitedEls.forEach(function (limitedEl) {\n                    limitedEl.classList.remove('fc-limited');\n                });\n                rowStruct.limitedEls = null;\n            }\n        };\n        // Renders an <a> element that represents hidden event element for a cell.\n        // Responsible for attaching click handler as well.\n        DayGrid.prototype.renderMoreLink = function (row, col, hiddenSegs) {\n            var _this = this;\n            var _a = this, view = _a.view, dateEnv = _a.dateEnv;\n            var a = core.createElement('a', { className: 'fc-more' });\n            a.innerText = this.getMoreLinkText(hiddenSegs.length);\n            a.addEventListener('click', function (ev) {\n                var clickOption = _this.opt('eventLimitClick');\n                var _col = _this.isRtl ? _this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n                var date = _this.props.cells[row][_col].date;\n                var moreEl = ev.currentTarget;\n                var dayEl = _this.getCellEl(row, col);\n                var allSegs = _this.getCellSegs(row, col);\n                // rescope the segments to be within the cell's date\n                var reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\n                var reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\n                if (typeof clickOption === 'function') {\n                    // the returned value can be an atomic option\n                    clickOption = _this.publiclyTrigger('eventLimitClick', [\n                        {\n                            date: dateEnv.toDate(date),\n                            allDay: true,\n                            dayEl: dayEl,\n                            moreEl: moreEl,\n                            segs: reslicedAllSegs,\n                            hiddenSegs: reslicedHiddenSegs,\n                            jsEvent: ev,\n                            view: view\n                        }\n                    ]);\n                }\n                if (clickOption === 'popover') {\n                    _this.showSegPopover(row, col, moreEl, reslicedAllSegs);\n                }\n                else if (typeof clickOption === 'string') { // a view name\n                    view.calendar.zoomTo(date, clickOption);\n                }\n            });\n            return a;\n        };\n        // Reveals the popover that displays all events within a cell\n        DayGrid.prototype.showSegPopover = function (row, col, moreLink, segs) {\n            var _this = this;\n            var _a = this, calendar = _a.calendar, view = _a.view, theme = _a.theme;\n            var _col = this.isRtl ? this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n            var moreWrap = moreLink.parentNode; // the <div> wrapper around the <a>\n            var topEl; // the element we want to match the top coordinate of\n            var options;\n            if (this.rowCnt === 1) {\n                topEl = view.el; // will cause the popover to cover any sort of header\n            }\n            else {\n                topEl = this.rowEls[row]; // will align with top of row\n            }\n            options = {\n                className: 'fc-more-popover ' + theme.getClass('popover'),\n                parentEl: view.el,\n                top: core.computeRect(topEl).top,\n                autoHide: true,\n                content: function (el) {\n                    _this.segPopoverTile = new DayTile(_this.context, el);\n                    _this.updateSegPopoverTile(_this.props.cells[row][_col].date, segs);\n                },\n                hide: function () {\n                    _this.segPopoverTile.destroy();\n                    _this.segPopoverTile = null;\n                    _this.segPopover.destroy();\n                    _this.segPopover = null;\n                }\n            };\n            // Determine horizontal coordinate.\n            // We use the moreWrap instead of the <td> to avoid border confusion.\n            if (this.isRtl) {\n                options.right = core.computeRect(moreWrap).right + 1; // +1 to be over cell border\n            }\n            else {\n                options.left = core.computeRect(moreWrap).left - 1; // -1 to be over cell border\n            }\n            this.segPopover = new Popover(options);\n            this.segPopover.show();\n            calendar.releaseAfterSizingTriggers(); // hack for eventPositioned\n        };\n        // Given the events within an array of segment objects, reslice them to be in a single day\n        DayGrid.prototype.resliceDaySegs = function (segs, dayDate) {\n            var dayStart = dayDate;\n            var dayEnd = core.addDays(dayStart, 1);\n            var dayRange = { start: dayStart, end: dayEnd };\n            var newSegs = [];\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                var eventRange = seg.eventRange;\n                var origRange = eventRange.range;\n                var slicedRange = core.intersectRanges(origRange, dayRange);\n                if (slicedRange) {\n                    newSegs.push(__assign({}, seg, { eventRange: {\n                            def: eventRange.def,\n                            ui: __assign({}, eventRange.ui, { durationEditable: false }),\n                            instance: eventRange.instance,\n                            range: slicedRange\n                        }, isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(), isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf() }));\n                }\n            }\n            return newSegs;\n        };\n        // Generates the text that should be inside a \"more\" link, given the number of events it represents\n        DayGrid.prototype.getMoreLinkText = function (num) {\n            var opt = this.opt('eventLimitText');\n            if (typeof opt === 'function') {\n                return opt(num);\n            }\n            else {\n                return '+' + num + ' ' + opt;\n            }\n        };\n        // Returns segments within a given cell.\n        // If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\n        DayGrid.prototype.getCellSegs = function (row, col, startLevel) {\n            var segMatrix = this.eventRenderer.rowStructs[row].segMatrix;\n            var level = startLevel || 0;\n            var segs = [];\n            var seg;\n            while (level < segMatrix.length) {\n                seg = segMatrix[level][col];\n                if (seg) {\n                    segs.push(seg);\n                }\n                level++;\n            }\n            return segs;\n        };\n        return DayGrid;\n    }(core.DateComponent));\n\n    var WEEK_NUM_FORMAT$1 = core.createFormatter({ week: 'numeric' });\n    /* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n    ----------------------------------------------------------------------------------------------------------------------*/\n    // It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\n    // It is responsible for managing width/height.\n    var DayGridView = /** @class */ (function (_super) {\n        __extends(DayGridView, _super);\n        function DayGridView(context, viewSpec, dateProfileGenerator, parentEl) {\n            var _this = _super.call(this, context, viewSpec, dateProfileGenerator, parentEl) || this;\n            /* Header Rendering\n            ------------------------------------------------------------------------------------------------------------------*/\n            // Generates the HTML that will go before the day-of week header cells\n            _this.renderHeadIntroHtml = function () {\n                var theme = _this.theme;\n                if (_this.colWeekNumbersVisible) {\n                    return '' +\n                        '<th class=\"fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.weekNumberStyleAttr() + '>' +\n                        '<span>' + // needed for matchCellWidths\n                        core.htmlEscape(_this.opt('weekLabel')) +\n                        '</span>' +\n                        '</th>';\n                }\n                return '';\n            };\n            /* Day Grid Rendering\n            ------------------------------------------------------------------------------------------------------------------*/\n            // Generates the HTML that will go before content-skeleton cells that display the day/week numbers\n            _this.renderDayGridNumberIntroHtml = function (row, dayGrid) {\n                var dateEnv = _this.dateEnv;\n                var weekStart = dayGrid.props.cells[row][0].date;\n                if (_this.colWeekNumbersVisible) {\n                    return '' +\n                        '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '>' +\n                        core.buildGotoAnchorHtml(// aside from link, important for matchCellWidths\n                        _this, { date: weekStart, type: 'week', forceOff: dayGrid.colCnt === 1 }, dateEnv.format(weekStart, WEEK_NUM_FORMAT$1) // inner HTML\n                        ) +\n                        '</td>';\n                }\n                return '';\n            };\n            // Generates the HTML that goes before the day bg cells for each day-row\n            _this.renderDayGridBgIntroHtml = function () {\n                var theme = _this.theme;\n                if (_this.colWeekNumbersVisible) {\n                    return '<td class=\"fc-week-number ' + theme.getClass('widgetContent') + '\" ' + _this.weekNumberStyleAttr() + '></td>';\n                }\n                return '';\n            };\n            // Generates the HTML that goes before every other type of row generated by DayGrid.\n            // Affects mirror-skeleton and highlight-skeleton rows.\n            _this.renderDayGridIntroHtml = function () {\n                if (_this.colWeekNumbersVisible) {\n                    return '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '></td>';\n                }\n                return '';\n            };\n            _this.el.classList.add('fc-dayGrid-view');\n            _this.el.innerHTML = _this.renderSkeletonHtml();\n            _this.scroller = new core.ScrollComponent('hidden', // overflow x\n            'auto' // overflow y\n            );\n            var dayGridContainerEl = _this.scroller.el;\n            _this.el.querySelector('.fc-body > tr > td').appendChild(dayGridContainerEl);\n            dayGridContainerEl.classList.add('fc-day-grid-container');\n            var dayGridEl = core.createElement('div', { className: 'fc-day-grid' });\n            dayGridContainerEl.appendChild(dayGridEl);\n            var cellWeekNumbersVisible;\n            if (_this.opt('weekNumbers')) {\n                if (_this.opt('weekNumbersWithinDays')) {\n                    cellWeekNumbersVisible = true;\n                    _this.colWeekNumbersVisible = false;\n                }\n                else {\n                    cellWeekNumbersVisible = false;\n                    _this.colWeekNumbersVisible = true;\n                }\n            }\n            else {\n                _this.colWeekNumbersVisible = false;\n                cellWeekNumbersVisible = false;\n            }\n            _this.dayGrid = new DayGrid(_this.context, dayGridEl, {\n                renderNumberIntroHtml: _this.renderDayGridNumberIntroHtml,\n                renderBgIntroHtml: _this.renderDayGridBgIntroHtml,\n                renderIntroHtml: _this.renderDayGridIntroHtml,\n                colWeekNumbersVisible: _this.colWeekNumbersVisible,\n                cellWeekNumbersVisible: cellWeekNumbersVisible\n            });\n            return _this;\n        }\n        DayGridView.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.dayGrid.destroy();\n            this.scroller.destroy();\n        };\n        // Builds the HTML skeleton for the view.\n        // The day-grid component will render inside of a container defined by this HTML.\n        DayGridView.prototype.renderSkeletonHtml = function () {\n            var theme = this.theme;\n            return '' +\n                '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                (this.opt('columnHeader') ?\n                    '<thead class=\"fc-head\">' +\n                        '<tr>' +\n                        '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n                        '</tr>' +\n                        '</thead>' :\n                    '') +\n                '<tbody class=\"fc-body\">' +\n                '<tr>' +\n                '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\n                '</tr>' +\n                '</tbody>' +\n                '</table>';\n        };\n        // Generates an HTML attribute string for setting the width of the week number column, if it is known\n        DayGridView.prototype.weekNumberStyleAttr = function () {\n            if (this.weekNumberWidth != null) {\n                return 'style=\"width:' + this.weekNumberWidth + 'px\"';\n            }\n            return '';\n        };\n        // Determines whether each row should have a constant height\n        DayGridView.prototype.hasRigidRows = function () {\n            var eventLimit = this.opt('eventLimit');\n            return eventLimit && typeof eventLimit !== 'number';\n        };\n        /* Dimensions\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n            _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n            this.dayGrid.updateSize(isResize);\n        };\n        // Refreshes the horizontal dimensions of the view\n        DayGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n            var dayGrid = this.dayGrid;\n            var eventLimit = this.opt('eventLimit');\n            var headRowEl = this.header ? this.header.el : null; // HACK\n            var scrollerHeight;\n            var scrollbarWidths;\n            // hack to give the view some height prior to dayGrid's columns being rendered\n            // TODO: separate setting height from scroller VS dayGrid.\n            if (!dayGrid.rowEls) {\n                if (!isAuto) {\n                    scrollerHeight = this.computeScrollerHeight(viewHeight);\n                    this.scroller.setHeight(scrollerHeight);\n                }\n                return;\n            }\n            if (this.colWeekNumbersVisible) {\n                // Make sure all week number cells running down the side have the same width.\n                this.weekNumberWidth = core.matchCellWidths(core.findElements(this.el, '.fc-week-number'));\n            }\n            // reset all heights to be natural\n            this.scroller.clear();\n            if (headRowEl) {\n                core.uncompensateScroll(headRowEl);\n            }\n            dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n            // is the event limit a constant level number?\n            if (eventLimit && typeof eventLimit === 'number') {\n                dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\n            }\n            // distribute the height to the rows\n            // (viewHeight is a \"recommended\" value if isAuto)\n            scrollerHeight = this.computeScrollerHeight(viewHeight);\n            this.setGridHeight(scrollerHeight, isAuto);\n            // is the event limit dynamically calculated?\n            if (eventLimit && typeof eventLimit !== 'number') {\n                dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\n            }\n            if (!isAuto) { // should we force dimensions of the scroll container?\n                this.scroller.setHeight(scrollerHeight);\n                scrollbarWidths = this.scroller.getScrollbarWidths();\n                if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n                    if (headRowEl) {\n                        core.compensateScroll(headRowEl, scrollbarWidths);\n                    }\n                    // doing the scrollbar compensation might have created text overflow which created more height. redo\n                    scrollerHeight = this.computeScrollerHeight(viewHeight);\n                    this.scroller.setHeight(scrollerHeight);\n                }\n                // guarantees the same scrollbar widths\n                this.scroller.lockOverflow(scrollbarWidths);\n            }\n        };\n        // given a desired total height of the view, returns what the height of the scroller should be\n        DayGridView.prototype.computeScrollerHeight = function (viewHeight) {\n            return viewHeight -\n                core.subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n        };\n        // Sets the height of just the DayGrid component in this view\n        DayGridView.prototype.setGridHeight = function (height, isAuto) {\n            if (this.opt('monthMode')) {\n                // if auto, make the height of each row the height that it would be if there were 6 weeks\n                if (isAuto) {\n                    height *= this.dayGrid.rowCnt / 6;\n                }\n                core.distributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\n            }\n            else {\n                if (isAuto) {\n                    core.undistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\n                }\n                else {\n                    core.distributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\n                }\n            }\n        };\n        /* Scroll\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGridView.prototype.computeInitialDateScroll = function () {\n            return { top: 0 };\n        };\n        DayGridView.prototype.queryDateScroll = function () {\n            return { top: this.scroller.getScrollTop() };\n        };\n        DayGridView.prototype.applyDateScroll = function (scroll) {\n            if (scroll.top !== undefined) {\n                this.scroller.setScrollTop(scroll.top);\n            }\n        };\n        return DayGridView;\n    }(core.View));\n    DayGridView.prototype.dateProfileGeneratorClass = DayGridDateProfileGenerator;\n\n    var SimpleDayGrid = /** @class */ (function (_super) {\n        __extends(SimpleDayGrid, _super);\n        function SimpleDayGrid(context, dayGrid) {\n            var _this = _super.call(this, context, dayGrid.el) || this;\n            _this.slicer = new DayGridSlicer();\n            _this.dayGrid = dayGrid;\n            context.calendar.registerInteractiveComponent(_this, { el: _this.dayGrid.el });\n            return _this;\n        }\n        SimpleDayGrid.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.calendar.unregisterInteractiveComponent(this);\n        };\n        SimpleDayGrid.prototype.render = function (props) {\n            var dayGrid = this.dayGrid;\n            var dateProfile = props.dateProfile, dayTable = props.dayTable;\n            dayGrid.receiveProps(__assign({}, this.slicer.sliceProps(props, dateProfile, props.nextDayThreshold, dayGrid, dayTable), { dateProfile: dateProfile, cells: dayTable.cells, isRigid: props.isRigid }));\n        };\n        SimpleDayGrid.prototype.queryHit = function (positionLeft, positionTop) {\n            var rawHit = this.dayGrid.positionToHit(positionLeft, positionTop);\n            if (rawHit) {\n                return {\n                    component: this.dayGrid,\n                    dateSpan: rawHit.dateSpan,\n                    dayEl: rawHit.dayEl,\n                    rect: {\n                        left: rawHit.relativeRect.left,\n                        right: rawHit.relativeRect.right,\n                        top: rawHit.relativeRect.top,\n                        bottom: rawHit.relativeRect.bottom\n                    },\n                    layer: 0\n                };\n            }\n        };\n        return SimpleDayGrid;\n    }(core.DateComponent));\n    var DayGridSlicer = /** @class */ (function (_super) {\n        __extends(DayGridSlicer, _super);\n        function DayGridSlicer() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        DayGridSlicer.prototype.sliceRange = function (dateRange, dayTable) {\n            return dayTable.sliceRange(dateRange);\n        };\n        return DayGridSlicer;\n    }(core.Slicer));\n\n    var DayGridView$1 = /** @class */ (function (_super) {\n        __extends(DayGridView, _super);\n        function DayGridView(_context, viewSpec, dateProfileGenerator, parentEl) {\n            var _this = _super.call(this, _context, viewSpec, dateProfileGenerator, parentEl) || this;\n            _this.buildDayTable = core.memoize(buildDayTable);\n            if (_this.opt('columnHeader')) {\n                _this.header = new core.DayHeader(_this.context, _this.el.querySelector('.fc-head-container'));\n            }\n            _this.simpleDayGrid = new SimpleDayGrid(_this.context, _this.dayGrid);\n            return _this;\n        }\n        DayGridView.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            if (this.header) {\n                this.header.destroy();\n            }\n            this.simpleDayGrid.destroy();\n        };\n        DayGridView.prototype.render = function (props) {\n            _super.prototype.render.call(this, props);\n            var dateProfile = this.props.dateProfile;\n            var dayTable = this.dayTable =\n                this.buildDayTable(dateProfile, this.dateProfileGenerator);\n            if (this.header) {\n                this.header.receiveProps({\n                    dateProfile: dateProfile,\n                    dates: dayTable.headerDates,\n                    datesRepDistinctDays: dayTable.rowCnt === 1,\n                    renderIntroHtml: this.renderHeadIntroHtml\n                });\n            }\n            this.simpleDayGrid.receiveProps({\n                dateProfile: dateProfile,\n                dayTable: dayTable,\n                businessHours: props.businessHours,\n                dateSelection: props.dateSelection,\n                eventStore: props.eventStore,\n                eventUiBases: props.eventUiBases,\n                eventSelection: props.eventSelection,\n                eventDrag: props.eventDrag,\n                eventResize: props.eventResize,\n                isRigid: this.hasRigidRows(),\n                nextDayThreshold: this.nextDayThreshold\n            });\n        };\n        return DayGridView;\n    }(DayGridView));\n    function buildDayTable(dateProfile, dateProfileGenerator) {\n        var daySeries = new core.DaySeries(dateProfile.renderRange, dateProfileGenerator);\n        return new core.DayTable(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n    }\n\n    var main = core.createPlugin({\n        defaultView: 'dayGridMonth',\n        views: {\n            dayGrid: DayGridView$1,\n            dayGridDay: {\n                type: 'dayGrid',\n                duration: { days: 1 }\n            },\n            dayGridWeek: {\n                type: 'dayGrid',\n                duration: { weeks: 1 }\n            },\n            dayGridMonth: {\n                type: 'dayGrid',\n                duration: { months: 1 },\n                monthMode: true,\n                fixedWeekCount: true\n            }\n        }\n    });\n\n    exports.default = main;\n    exports.SimpleDayGrid = SimpleDayGrid;\n    exports.DayGridSlicer = DayGridSlicer;\n    exports.DayGrid = DayGrid;\n    exports.AbstractDayGridView = DayGridView;\n    exports.DayGridView = DayGridView$1;\n    exports.buildBasicDayTable = buildDayTable;\n    exports.DayBgRow = DayBgRow;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]},"metadata":{},"sourceType":"script"}